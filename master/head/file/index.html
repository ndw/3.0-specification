<html xmlns="http://www.w3.org/1999/xhtml"><head><title>XProc 3.0: file steps</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link class="removeOnSave" crossorigin="anonymous" href="https://www.w3.org" rel="preconnect" /><link as="script" class="removeOnSave" href="js/fixup.js" rel="preload" /><link as="style" class="removeOnSave" href="css/base.css" rel="preload" /><link as="image" class="removeOnSave" href="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" rel="preload" /><link rel="stylesheet" href="css/cg-draft.css" /><link rel="stylesheet" href="css/respec.css" /><link rel="alternate" title="XML" href="specification.xml" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.4.2" /><meta name="description" content="Abstract This specification describes the file related steps&#xA;for&#xA;XProc 3.0: An XML Pipeline Language." /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/print.css" media="print" /><script type="text/javascript" src="js/dbmodnizr.js"></script></head><body><attribute name="class" select="'h-entry informative toc-sidebar'"></attribute><div class="head" id="spec.head"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" /></a><h1 id="title" class="title p-name">XProc 3.0: file steps</h1><h2>Draft Community Group Report <time class="dt-published" datetime="2019-01-04">1 January 2020</time></h2><div class="editors-draft">Editor's Draft   at 17:51 UTC (<a href="https://github.com/xproc/3.0-steps/commit/5c1a7f5c9e65cadbc29e23cbd256eaab06ff1c34">build 333</a>)</div><dl><dt>Latest editor’s draft:</dt><dd><a href="http://spec.xproc.org/master/head/file/">http://spec.xproc.org/master/head/file/</a></dd><dt>Editors:</dt><dd><span class="personname">Norman Walsh</span></dd><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dt>Participate:</dt><dd><a href="http://github.com/xproc/3.0-steps">GitHub xproc/3.0-steps</a></dd><dd><a href="http://github.com/xproc/3.0-steps/issues">Report an issue</a></dd><dt>Changes:</dt><dd><a href="diff.html">Diff against current “status quo” draft</a></dd><dd><a href="http://github.com/xproc/3.0-steps/commits/master">Commits for this specification</a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a>, 
	  automatic change markup
          <a href="diff.html">from the previous draft</a>
          and <a href="lcdiff.html">from the last call draft</a>
          courtesy of <a href="http://www.deltaxml.com/">DeltaXML</a>.</p><p class="copyright"><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020</span> the Contributors to the <cite>XProc 3.0: file steps</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C
    Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</p></p><hr title="Separator for header" /><section id="abstract" class="introductory"><h2>Abstract</h2>
<p>This specification describes the file related steps
for
<em class="citetitle">XProc 3.0: An XML Pipeline Language</em>.</p>
</section><section id="sotd" class="introductory"><h2>Status of this Document</h2><p><strong>This document is an editor's  draft that has no official standing.</strong></p>
  <p>This specification was published by the
  <a href="https://www.w3.org/community/xproc-next/">XProc
  Next Community Group</a>. It is not a W3C Standard nor is it on
  the W3C Standards Track. Please note that under the
  <a href="https://www.w3.org/community/about/agreements/cla/">W3C
  Community Contributor License Agreement (CLA)</a> there is a limited
  opt-out and other conditions apply. Learn more about <a href="https://www.w3.org/community/">W3C Community and Business
  Groups</a>.
  </p>
  
  <p>If you wish to make comments regarding this document, please
  send them to
  <a href="mailto:xproc-dev@w3.org">xproc-dev@w3.org</a>.
  (<a href="mailto:xproc-dev-request@w3.org?subject=subscribe">subscribe</a>,
  <a href="https://lists.w3.org/Archives/Public/xproc-dev/">archives</a>).
  </p>
</section></div><div class="lists-of-titles"><nav id="toc"><h2 id="TableOfContents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#c.directory-list"><bdi class="secno">2. </bdi>p:directory-list</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dir-list-details"><bdi class="secno">2.1. </bdi>Directory list details</a></li></ul></li><li class="tocline"><a class="tocxref" href="#c.file-copy"><bdi class="secno">3. </bdi>p:file-copy</a></li><li class="tocline"><a class="tocxref" href="#c.file-delete"><bdi class="secno">4. </bdi>p:file-delete</a></li><li class="tocline"><a class="tocxref" href="#c.file-info"><bdi class="secno">5. </bdi>p:file-info</a></li><li class="tocline"><a class="tocxref" href="#c.file-mkdir"><bdi class="secno">6. </bdi>p:file-mkdir</a></li><li class="tocline"><a class="tocxref" href="#c.file-move"><bdi class="secno">7. </bdi>p:file-move</a></li><li class="tocline"><a class="tocxref" href="#c.file-create-tempfile"><bdi class="secno">8. </bdi>p:file-create-tempfile</a></li><li class="tocline"><a class="tocxref" href="#c.file-touch"><bdi class="secno">9. </bdi>p:file-touch</a></li><li class="tocline"><a class="tocxref" href="#errors"><bdi class="secno">10. </bdi>Step Errors</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">A. </bdi>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#implementation-defined"><bdi class="secno">A.1. </bdi>Implementation-defined features</a></li><li class="tocline"><a class="tocxref" href="#implementation-dependent"><bdi class="secno">A.2. </bdi>Implementation-dependent features</a></li></ul></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a></li><li class="tocline"><a class="tocxref" href="#glossary"><bdi class="secno">C. </bdi>Glossary</a></li><li class="tocline"><a class="tocxref" href="#ancillary-files"><bdi class="secno">D. </bdi>Ancillary files</a></li></ol></nav></div><article class="specification">


<section id="introduction" class="section"><div class="section-titlepage"><h2><bdi class="secno">1. </bdi>Introduction<a aria-label="§" class="self-link" href="#introduction"></a></h2></div><div class="content">


<p>This specification describes the file related XProc steps.
A machine-readable description of
these steps may be found in
<a href="steps.xpl">steps.xpl</a>.
</p>

<p>Familarity with the
general nature of [<a href="#xproc30"><span class="abbrev">XProc 3.0</span></a>]
steps is assumed; for background details, see
[<a href="#xproc30-steps"><span class="abbrev">XProc 3.0 Steps</span></a>].</p>
</div></section>

  <section id="c.directory-list" class="section"><div class="section-titlepage"><h2><bdi class="secno">2. </bdi>p:directory-list<a aria-label="§" class="self-link" href="#c.directory-list"></a></h2></div><div class="content">
    
    
    <p>The <code class="code">p:directory-list</code> step produces a list of the contents
      of a specified directory.</p>
    
    <p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:directory-list</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr content-type-attr">content-type</code><code>="</code><code class="value content-type-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">path</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">detailed</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">false()</code><code>"</code><code>/&gt;</code><code>  </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">max-depth</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string?</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">'1'</code><code>"</code><code>/&gt;</code><code>     </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">include-filter</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string*</code><code>"</code><code>/&gt;</code><code>             </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">exclude-filter</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string*</code><code>"</code><code>/&gt;</code><code>             </code></span><br /><code>&lt;/p:declare-step&gt;</code></p>
    
    <p><span id="impl-1">Conformant processors <span class="rfc2119" id="c.directory-list.4.1.1">must</span> support directory paths whose
      scheme is <code class="code">file</code>. It is
      <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> what other schemes are
      supported by <code class="tag-element">p:directory-list</code>, and what the interpretation
      of 'directory', 'file' and 'contents' is for those schemes.</span>
      <a id="err.inline.C0090"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0090"><code class="errqname">err:XC0090</code></a>) if an
        implementation does not support directory listing for a specified scheme.
    </p>
    
    <p>If <code class="option">path</code> is relative, it is made absolute against the 
      base URI of the element on which it is specified 
      (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:directory-list</code> in the case of a 
      syntactic shortcut value). <a id="err.inline.C0017"></a>It is a
        <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0017"><code class="errqname">err:XC0017</code></a>) if the absolute path does not
        identify a directory. <a id="err.inline.C0012"></a>It is a
          <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0012"><code class="errqname">err:XC0012</code></a>) if the contents of the directory
          path are not available to the step due to access restrictions in the
          environment in which the pipeline is run.</p>
    
    <p>If the <code class="option">detailed</code> option is true, the pipeline
      author is requesting additional information about the matching entries,
      see <a href="#dir-list-details" title="Directory list details">Section 2.1, “Directory list details”</a>.</p>
    
    <p>The <code class="option">max-depth</code> option may contain either the string “<code class="literal">unbounded</code>” or a string
      that may be cast to a non-negative integer. An integer value of <code class="literal">0</code> means that only information
      about the directory that is given in the <code class="option">path</code> option is returned. A <code class="option">max-depth</code> of
      <code class="literal">1</code>, which is the default, will effect that also information about the top-level directory’s
      immediate children will be included. For larger values of <code class="option">max-depth</code>, also the content of
      directories will be considered recursively up to the maximum depth, and it will be included as children of the
      corresponding <a href="#cv.directory"><code class="tag-element">c:directory</code></a> elements.</p>
    
    <p>If present, the value of the <code class="option">include-filter</code> or
      <code class="option">exclude-filter</code> option <span class="rfc2119" id="c.directory-list.8.3">must</span> be a sequence of strings, each
      one representing a regular expressions as specified in [<a href="#xpath31-functions"><span class="abbrev">XPath and XQuery Functions and Operators 3.1</span></a>],
      section 7.61 “<code class="literal">Regular Expression Syntax</code>”.</p>
    
    <p>The regular expressions will be matched against an item’s file system path relative to the top-level path that was
      given in the <code class="option">path</code> option. If the item is a directory, a trailing slash will be appended.</p>
    <p>Examples: A file <code class="literal">file.txt</code> in the directory specified by <code class="option">path</code> will remain
      <code class="literal">file.txt</code>, a relative path <code class="literal">dir1/file.txt</code> will remain
      <code class="literal">dir1/file.txt</code>, while a relative path <code class="literal">dir1/dir2</code> will become
      <code class="literal">dir1/dir2/</code> if <code class="literal">dir2</code> is a directory.</p>
    <p>Regular expressions that match <code class="literal">a/a/b/file.txt</code> are, for example,
      <code class="literal">^/(\w+/){2,3}.+\.txt$</code>, <code class="literal">a/a/b/</code>, or <code class="literal">/file\.[^/]+$</code>.</p>
    
    <p>If any <code class="option">include-filter</code> pattern matches the slash-augmented relative path, the entry is included in the output. 
      If a directory’s path matches the inclusion regex, the directory’s content will not automatically be included, too.
      They need to match, the regular expression, too. So the filter regex <code class="literal">^dir/</code> will match the directory
      content but <code class="literal">^dir/$</code> won’t, and as a consequence the directory’s content will not be included in the result.</p>
    <p>If a relative path is matched by an include filter,
      all its ancestor directories starting from the initial directory (but not their content if not included explicitly) 
      will be included, too.</p>
    <figure id="ex.c.directory-list" class="example-wrapper"><div class="title">Example 1. Sample Directory List Output for a Single File</div><div class="example"><p>For a file <code class="literal">a/a/b/file.txt</code> below the initial directory 
        <code class="literal">/home/jane</code>, this output will be produced, omitting content that might be present in the 
        intermediate directories:</p><pre class="literallayout language-none line-numbers"><code>&lt;c:directory xml:base="file:///home/jane/" name="jane"&gt;
  &lt;c:directory xml:base="a/" name="a"&gt;
    &lt;c:directory xml:base="a/" name="a"&gt;
      &lt;c:directory xml:base="b/" name="b"&gt;
        &lt;c:file xml:base="file.txt" name="file.txt"/&gt;
      &lt;/c:directory&gt;
    &lt;/c:directory&gt;
  &lt;/c:directory&gt;
&lt;/c:directory&gt;</code></pre></div></figure>
    <p>If the <code class="option">exclude-filter</code> pattern matches the slash-augmented relative path, the entry (and all of
      its content in case of a directory) is excluded in the output.</p>
    <p>If both options are
      provided, the include filter is processed first, then the exclude
      filter. As a result, an item is included if it matches (at least) one
      of the <code class="option">include-filter</code> values and none of the
      <code class="option">exclude-filter</code> values.</p>
    <p>If no <code class="option">include-filter</code> is given, that is, if <code class="option">include-filter</code> is an empty
      sequence, any item will be included in the result (unless it is excluded by <code class="option">exclude-filter</code>).</p>
    
    <div class="note admonition"><h3>Note</h3><div class="admonition-body">
      <p>There is no way to specify a list of values using attribute value
        templates. If the option shortcut syntax is used to provide the
        <code class="option">include-filter</code> or <code class="option">exclude-filter</code> option,
        it will consist of a single regular expression. To specify a list of
        regular expressions, you must use the  <code class="tag-element">p:with-option</code>
        syntax.
      </p>
    </div></div>
    
    <p id="cv.directory">The result document produced for the specified directory path has a <a href="#cv.directory"><code class="tag-element">c:directory</code></a>
      document element whose base URI, attached as an <code class="tag-element attribute">xml:base</code> attribute, is the absolute
      directory path (expressed as a URI that ends in a slash) and whose <code class="tag-attribute">name</code> attribute
      (without a trailing slash) is the last segment of the directory path. The same base URI is attached as the 
      resulting document’s base-uri property and, accordingly, as its document node’s base URI.</p>
    
    <p id="d304e0" class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:directory<br />  <strong>name</strong> = <var>string</var>&gt;<br />    (<br />  <strong>size</strong> = <var>integer</var><br />  <strong>readable</strong> = <var>boolean</var><br />  <strong>writable</strong> = <var>boolean</var><br />  <strong>last-modified</strong> = <var>dateTime</var><br />  <strong>hidden</strong> = <var>boolean</var>)*,<br />    (<a href="#cv.file">c:file</a> | <br />     <a href="#cv.directory">c:directory</a> | <br />     <a href="#cv.other">c:other</a>)*<br />&lt;/c:directory&gt;</code></p>
    
    <p>Its contents are determined as follows, based on the entries in the directory identified by the directory path.
      For each entry in the directory and subject to the rules that are imposed by the <code class="option">max-depth</code>,
      <code class="option">include-filter</code>, and <code class="option">exclude-filter</code> options, a <a href="#cv.file"><code class="tag-element">c:file</code></a>, a
      <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, or a <a href="#cv.other"><code class="tag-element">c:other</code></a> element is produced, as follows: </p>
    
    <div class="itemizedlist">
      
      
      
    <ul><li>
        <p>A <a href="#cv.directory"><code class="tag-element">c:directory</code></a> is produced for each subdirectory not determined to be special. Depending on the
          values of the three options, it may contain child elements for the directory’s content.</p>
      </li><li>
        <p id="cv.file">A <a href="#cv.file"><code class="tag-element">c:file</code></a> is produced for each file
          not determined to be special.</p>
        <p id="d323e0" class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:file<br />  <strong>name</strong> = <var>string</var><br />  content-type? = <var>ContentType</var>&gt;<br />    (<br />  <strong>size</strong> = <var>integer</var><br />  <strong>readable</strong> = <var>boolean</var><br />  <strong>writable</strong> = <var>boolean</var><br />  <strong>last-modified</strong> = <var>dateTime</var><br />  <strong>hidden</strong> = <var>boolean</var>)*<br />&lt;/c:file&gt;</code></p>
      </li><li>
        <p id="cv.other"><span id="impl-2">Any file or directory determined to be
          special by the <code class="tag-element">p:directory-list</code> step may be output using a
          <a href="#cv.other"><code class="tag-element">c:other</code></a> element but the criteria for marking a file as
          special are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span>
        </p>
        <p id="d333e0" class="element-syntax element-syntax-step-vocabulary"><code>&lt;c:other<br />  <strong>name</strong> = <var>string</var>&gt;<br />    (<br />  <strong>size</strong> = <var>integer</var><br />  <strong>readable</strong> = <var>boolean</var><br />  <strong>writable</strong> = <var>boolean</var><br />  <strong>last-modified</strong> = <var>dateTime</var><br />  <strong>hidden</strong> = <var>boolean</var>)*<br />&lt;/c:other&gt;</code></p>
      </li></ul></div>
    
    <p>Each of the elements <a href="#cv.file"><code class="tag-element">c:file</code></a>, <a href="#cv.directory"><code class="tag-element">c:directory</code></a>,
      and <a href="#cv.other"><code class="tag-element">c:other</code></a> has a <code class="code">name</code> attribute, whose
      value is a relative IRI reference, giving the (local) file or
      directory name.</p>
    
    <p>Each of these element also contains the corresponding resource’s URI in an <code class="tag-element attribute">xml:base</code>
      attribute, which may be a relative URI for any but the top-level <a href="#cv.directory"><code class="tag-element">c:directory</code></a> element. In the case of
      <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, it must end in a trailing slash. This way, users will always be able to compute the
      absolute URI for any of these elements by applying <code class="code">fn:base-uri()</code> to it.</p>
    
    <section id="dir-list-details" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.1. </bdi>Directory list details<a aria-label="§" class="self-link" href="#dir-list-details"></a></h3></div><div class="content">
      
      
      <p>If <code class="option">detailed</code> is false, then only the
        <code class="tag-attribute">name</code> and <code class="tag-attribute">xml:base</code> attributes are expected on
        <a href="#cv.file"><code class="tag-element">c:file</code></a>, <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, or <a href="#cv.other"><code class="tag-element">c:other</code></a>
        elements.</p>
      
      <p>If <code class="option">detailed</code> is true, then the pipeline author
        is expecting additional details about each entry. The following attributes
        <span class="rfc2119" id="dir-list-details.3.2">should</span> be provided by the implementation:</p>
      
      <div class="variablelist">
        
        
        
        
        
        
      <dl><dt><span class="term"><code class="tag-attribute">content-type</code></span></dt><dd>
            <p>The <code class="tag-element attribute">content-type</code> attribute contains
              the content type of the respective file. The value “<code class="literal">application/octet-stream</code>”
              will be used if the processor is not able to identify another content type.</p>
          </dd><dt><span class="term"><code class="tag-attribute">readable</code></span></dt><dd><p>“<code class="code">true</code>” if the entry is readable.</p>
          </dd><dt><span class="term"><code class="tag-attribute">writable</code></span></dt><dd><p>“<code class="code">true</code>” if the entry is writable.</p>
          </dd><dt><span class="term"><code class="tag-attribute">hidden</code></span></dt><dd><p>“<code class="code">true</code>” if the entry is hidden.</p>
          </dd><dt><span class="term"><code class="tag-attribute">last-modified</code></span></dt><dd><p>The last modification time of the entry, expressed as a lexical
            <code class="code">xs:dateTime</code> in UTC.</p>
          </dd><dt><span class="term"><code class="tag-attribute">size</code></span></dt><dd><p>The size of the entry in bytes.</p>
          </dd></dl></div>
      
      <p><span id="impl-3">The precise meaning of these properties are
        <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> and may vary according
        to the URI scheme of the <code class="option">path</code>.</span>
        If the value of an attribute is “<code class="code">false</code>” or if it has no
        meaningful value, the attribute may be omitted.</p>
      
      <p><span id="impl-4">Any other attributes on
        <a href="#cv.file"><code class="tag-element">c:file</code></a>, <a href="#cv.directory"><code class="tag-element">c:directory</code></a>, or <a href="#cv.other"><code class="tag-element">c:other</code></a>
        are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</span></p>
    </div></section>
    
    <section id="c.directory-list.26" class="simplesect"><div class="section-titlepage"><h3>Document properties</h3></div><div class="content">
      
      <p>No document properties are preserved.</p>
    </div></section>
  </div></section>
  
  <section id="c.file-copy" class="section"><div class="section-titlepage"><h2><bdi class="secno">3. </bdi>p:file-copy<a aria-label="§" class="self-link" href="#c.file-copy"></a></h2></div><div class="content">
  

  <p>The <code class="code">p:file-copy</code> step copies a file.</p>

  <p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-copy</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">target</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>      </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

  <p>The <code class="tag-element">p:file-copy</code> step copies the file or directory named in <code class="option">href</code> to the new name specified in
      <code class="option">target</code>. If the target is a directory, the step attempts to move the file into that directory,
    preserving its base name.</p>

  <p><a id="err.inline.D0064"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the <code class="option">href</code> or
        <code class="option">target</code> option value is not a valid <code class="type">xs:anyURI</code>. If the <code class="option">href</code>
    or <code class="option">target</code> is relative, it is made absolute against the base URI of the element on which it is
    specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-copy</code> in the case of a syntactic shortcut value).</p>

  <p>If the copy is successful, the step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the
    target.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a
      <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of
    the error.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is
    raised:</p>
  <div class="itemizedlist">
    
    
  <ul><li>
      <p><a id="err.inline.D0011"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the
            <code class="option">href</code> option does not exist, cannot be accessed or is not a file or directory.</p>
    </li><li>
      <p><a id="err.inline.C0050"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0050"><code class="errqname">err:XC0050</code></a>) if the URI scheme of the
            <code class="option">target</code> option is not supported or the file or directory cannot be copied to the specified
          location.</p>
    </li></ul></div>


  <section id="c.file-copy.10" class="simplesect"><div class="section-titlepage"><h3>Document properties</h3></div><div class="content">
    
    <p>No document properties are preserved.</p>
  </div></section>
  
</div></section>

<section id="c.file-delete" class="section"><div class="section-titlepage"><h2><bdi class="secno">4. </bdi>p:file-delete<a aria-label="§" class="self-link" href="#c.file-delete"></a></h2></div><div class="content">
  

  <p>The <code class="code">p:file-delete</code> step deletes a file or a directory.</p>

  <p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-delete</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">recursive</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">false()</code><code>"</code><code>/&gt;</code><code> </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

  <p>The <code class="tag-element">p:file-delete</code> step attempts to delete the file or directory named in
    <code class="option">href</code>.</p>

  <p><a id="err.inline.D0064.1"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the <code class="option">href</code> option value is
      not a valid <code class="type">xs:anyURI</code>. If the <code class="option">href</code> option is relative, it is made absolute
    against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-delete</code>
    in the case of a syntactic shortcut value).</p>

  <p>If <code class="option">href</code> specifies a directory, it can only be deleted if the <code class="option">recursive</code> option
    is <code class="code">true</code> or if the specified directory is empty.</p>

  <p>If the delete is successful, the step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the
    deleted file or directory.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a
      <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of
    the error.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is
    raised:</p>
  <div class="itemizedlist">
    
    
  <ul><li>
      <p><a id="err.inline.D0011.1"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the
            <code class="option">href</code> option does not exist, cannot be accessed or is not a file or directory.</p>
    </li><li>
      <p><a id="err.inline.C0113"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0113"><code class="errqname">err:XC0113</code></a>) if an attempt is made to delete a non-empty
      directory and the <code class="option">recursive</code> option was set to <code class="code">false</code>.</p>
    </li></ul></div>


  <section id="c.file-delete.11" class="simplesect"><div class="section-titlepage"><h3>Document properties</h3></div><div class="content">
    
    <p>No document properties are preserved.</p>
  </div></section>

</div></section>

<section id="c.file-info" class="section"><div class="section-titlepage"><h2><bdi class="secno">5. </bdi>p:file-info<a aria-label="§" class="self-link" href="#c.file-info"></a></h2></div><div class="content">
  

  <p>The <code class="code">p:file-info</code> step returns information about a file, directory or other file system
    object.</p>

  <p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-info</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

  <p>The <code class="tag-element">p:file-info</code> step returns information about the file, directory or other file system object named
    in the <code class="option">href</code> option.</p>

  <p><a id="err.inline.D0064.2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the <code class="option">href</code> option value is
      not a valid <code class="type">xs:anyURI</code>. If the <code class="option">href</code> option is relative, it is made absolute
    against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-info</code> in
    the case of a syntactic shortcut value).</p>

  <p>If the <code class="option">href</code> option is not a <code class="code">file:</code> URI, the result is implementation
    defined.</p>

  <p>If the <code class="option">href</code> option is a <code class="code">file:</code> URI, the step returns:</p>
  <div class="itemizedlist">
    
    
    
  <ul><li>
      <p>If <code class="option">href</code> option references a file: A <a href="#cv.file"><code class="tag-element">c:file</code></a> element with standard attributes (see
        below).</p>
    </li><li>
      <p>If <code class="option">href</code> option references a directory: A <a href="#cv.directory"><code class="tag-element">c:directory</code></a> element with standard
        attributes (see below).</p>
    </li><li>
      <p>If <code class="option">href</code> option references any other file system object: Implementation defined (for example
        an <a href="#cv.other"><code class="tag-element">c:other</code></a> or <code class="tag-element">c:device</code> element). It is advised to use the standard attributes (see below)
        if applicable.</p>
    </li></ul></div>

  <p>The following attributes are standard on a returned <a href="#cv.file"><code class="tag-element">c:file</code></a> or <a href="#cv.directory"><code class="tag-element">c:directory</code></a> element. All
    attributes are optional and must be absent if not applicable. Additional implementation-defined attributes may be
    present, but they must be in a namespace.</p>
  <figure id="c.file-info.10" class="informaltable-wrapper"><div class="informaltable"><table border="0" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="tcol1" width="33%" /><col class="tcol2" width="33%" /><col class="tcol3" width="33%" /></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Attribute</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Type</th><th style="border-bottom: 1px solid ; ">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="tag-attribute">readable</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="type">xs:boolean</code></td><td style="border-bottom: 1px solid ; "><code class="literal">true</code> if the object is readable.</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="tag-attribute">writable</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="type">xs:boolean</code></td><td style="border-bottom: 1px solid ; "><code class="literal">true</code> if the object file is writable.</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="tag-attribute">hidden</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="type">xs:boolean</code></td><td style="border-bottom: 1px solid ; "><code class="literal">true</code> if the object is hidden.</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="tag-attribute">last-modified</code></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><code class="type">xs:dateTime</code></td><td style="border-bottom: 1px solid ; ">The last modification time of the object expressed in UTC.</td></tr><tr><td style="border-right: 1px solid ; "><code class="tag-attribute">size</code></td><td style="border-right: 1px solid ; "><code class="type">xs:integer</code></td><td>The size of the object in bytes.</td></tr></tbody></table></div></figure>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a
      <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of
    the error.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is
    raised:</p>
  <div class="itemizedlist">
    
  <ul><li>
      <p><a id="err.inline.D0011.2"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the
            <code class="option">href</code> option does not exist, cannot be accessed or is not a file, directory or other file
          system object.</p>
    </li></ul></div>


  <section id="c.file-info.14" class="simplesect"><div class="section-titlepage"><h3>Document properties</h3></div><div class="content">
    
    <p>No document properties are preserved.</p>
  </div></section>

</div></section>

<section id="c.file-mkdir" class="section"><div class="section-titlepage"><h2><bdi class="secno">6. </bdi>p:file-mkdir<a aria-label="§" class="self-link" href="#c.file-mkdir"></a></h2></div><div class="content">
  

  <p>The <code class="code">p:file-mkdir</code> step creates a directory.</p>

  <p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-mkdir</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

  <p>The <code class="tag-element">p:file-mkdir</code> create the directory named in the <code class="option">href</code> option. If this includes
    more than one directory component, all of the intermediate components are created. The path separator is
    implementation-defined.</p>

  <p><a id="err.inline.D0064.3"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the <code class="option">href</code> option value is
      not a valid <code class="type">xs:anyURI</code>. If the <code class="option">href</code> option is relative, it is made absolute
    against the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-mkdir</code> in
    the case of a syntactic shortcut value).</p>

  <p>If the create is successful, the step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the
    directory created.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a
      <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of
    the error.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is
    raised:</p>
  <div class="itemizedlist">
    
  <ul><li>
      <p><a id="err.inline.C0114"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0114"><code class="errqname">err:XC0114</code></a>) if the directory referenced by the
            <code class="option">href</code> option cannot be created.</p>
    </li></ul></div>

  <section id="c.file-mkdir.10" class="simplesect"><div class="section-titlepage"><h3>Document properties</h3></div><div class="content">
    
    <p>No document properties are preserved.</p>
  </div></section>

</div></section>
<section id="c.file-move" class="section"><div class="section-titlepage"><h2><bdi class="secno">7. </bdi>p:file-move<a aria-label="§" class="self-link" href="#c.file-move"></a></h2></div><div class="content">
  

  <p>The <code class="code">p:file-move</code> step moves a file or directory.</p>

  <p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-move</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">target</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>      </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

  <p>The <code class="tag-element">p:file-move</code> step moves the file or directory named in <code class="option">href</code> to the new location
    specified in <code class="option">target</code>. If the <code class="option">target</code> option specifies an
      <em>existing</em> directory, the step attempts to move the file or directory <em>into</em>
    that directory, preserving its base name.</p>

  <p><a id="err.inline.D0064.4"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the <code class="option">href</code> or
        <code class="option">target</code> option value is not a valid <code class="type">xs:anyURI</code>. If the <code class="option">href</code>
    or <code class="option">target</code> is relative, it is made absolute against the base URI of the element on which it is
    specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-move</code> in the case of a syntactic shortcut value).</p>

  <p>If the <code class="option">href</code> option specifies a device or other special kind of object, the results are
    implementation-defined.</p>

  <p>If the move is successful, the step returns a <code class="tag-element">c:result</code> element containing the absolute URI of the
    target.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a
      <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of
    the error.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is
    raised:</p>
  <div class="itemizedlist">
    
    
    
  <ul><li>
      <p><a id="err.inline.D0011.3"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the
            <code class="option">href</code> option does not exist, cannot be accessed or is not a file or
        directory.</p>
    </li><li>
      <p><a id="err.inline.C0115"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0115"><code class="errqname">err:XC0115</code></a>) if the resource referenced by the
        <code class="option">target</code> option is an existing file or other file system object.</p>
    </li><li>
      <p><a id="err.inline.C0050.1"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0050"><code class="errqname">err:XC0050</code></a>) if the URI scheme of the
            <code class="option">target</code> option is not supported or the file or directory cannot be moved to the specified
          location.</p>
    </li></ul></div>

  <section id="c.file-move.11" class="simplesect"><div class="section-titlepage"><h3>Document properties</h3></div><div class="content">
    
    <p>No document properties are preserved.</p>
  </div></section>

</div></section>

<section id="c.file-create-tempfile" class="section"><div class="section-titlepage"><h2><bdi class="secno">8. </bdi>p:file-create-tempfile<a aria-label="§" class="self-link" href="#c.file-create-tempfile"></a></h2></div><div class="content">
  
 
  <p>The <code class="code">p:file-create-tempfile</code> step creates a temporary file.</p>

  <p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-create-tempfile</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI?</code><code>"</code><code>/&gt;</code><code>                       </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">suffix</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string?</code><code>"</code><code>/&gt;</code><code>                     </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">prefix</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:string?</code><code>"</code><code>/&gt;</code><code>                     </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">delete-on-exit</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">false()</code><code>"</code><code>/&gt;</code><code></code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

  <p>The <code class="tag-element">p:file-create-tempfile</code> creates a temporary file. The temporary file is guaranteed not to already exist
    when the step is called.</p>

  <p>If the <code class="option">href</code> option is specified it must be the URI of an existing directory. The temporary file
    is created here. If there is no <code class="option">href</code> option specified the location of the temporary file is
    implementation defined, usually the operating system's default location for temporary files.</p>

  <p><a id="err.inline.D0064.5"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>) if the <code class="option">href</code> option value is
      not a valid <code class="type">xs:anyURI</code>. If the <code class="option">href</code> is relative, it is made absolute against
    the base URI of the element on which it is specified (<code class="tag-element">p:with-option</code> or <code class="tag-element">p:file-create-tempfile</code> in the
    case of a syntactic shortcut value).</p>

  <p>If the <code class="option">prefix</code> option is specified, the filename will begin with that prefix. If the
      <code class="option">suffix</code> option is specified, the filename will end with that suffix.</p>

  <p>If the <code class="option">delete-on-exit</code> option is <code class="code">true</code>, an attempt will be made to automatically
    delete the temporary file when the processor terminates the pipeline. No error will be raised if this is
    unsuccessful.</p>

  <p>If the temporary file creation is successful, the step returns a <code class="tag-element">c:result</code> element containing the
    absolute URI of this file.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">false</code>, the step returns a
      <code class="tag-element">c:error</code> element which may contain additional, implementation-defined, information about the nature of
    the error.</p>

  <p>If an error occurs and <code class="option">fail-on-error</code> is <code class="code">true</code>, one of the following errors is
    raised:</p>
  <div class="itemizedlist">
    
    
  <ul><li>
      <p><a id="err.inline.D0011.4"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the
            <code class="option">href</code> option does not exist, cannot be accessed or is not a directory.</p>
    </li><li>
      <p><a id="err.inline.C0116"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0116"><code class="errqname">err:XC0116</code></a>) if the temporary file could not be
          created.</p>
    </li></ul></div>

  <section id="c.file-create-tempfile.13" class="simplesect"><div class="section-titlepage"><h3>Document properties</h3></div><div class="content">
    
    <p>No document properties are preserved.</p>
  </div></section>

</div></section>

<section id="c.file-touch" class="section"><div class="section-titlepage"><h2><bdi class="secno">9. </bdi>p:file-touch<a aria-label="§" class="self-link" href="#c.file-touch"></a></h2></div><div class="content">


<p>The <code class="code">p:file-touch</code> step updates the modification
timestamp of a file.</p>

  <p class="element-syntax element-syntax-declare-step"><span class="decl"><code>&lt;p:declare-step</code> <code class="attr type-attr">type</code><code>="</code><code class="value type-value">p:file-touch</code><code>"</code><code>&gt;</code></span><br />     <span class="input"><code>&lt;p:output</code> <code class="attr port-attr">port</code><code>="</code><code class="value port-value">result</code><code>"</code> <code class="attr primary-attr">primary</code><code>="</code><code class="value primary-value">true</code><code>"</code> <code class="attr content-types-attr">content-types</code><code>="</code><code class="value content-types-value">application/xml</code><code>"</code><code>/&gt;</code></span><br />     <span class="opt-req"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">href</code><code>"</code> <code class="attr required-attr">required</code><code>="</code><code class="value required-value">true</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:anyURI</code><code>"</code><code>/&gt;</code><code>        </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">timestamp</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:dateTime?</code><code>"</code><code>/&gt;</code><code>                </code></span><br />     <span class="opt-opt"><code>&lt;p:option</code> <code class="attr name-attr">name</code><code>="</code><code class="value name-value">fail-on-error</code><code>"</code> <code class="attr as-attr">as</code><code>="</code><code class="value as-value">xs:boolean</code><code>"</code> <code class="attr select-attr">select</code><code>="</code><code class="value select-value">true()</code><code>"</code><code>/&gt;</code><code></code></span><br /><code>&lt;/p:declare-step&gt;</code></p>

<p>The <code class="tag-element">p:file-touch</code> step updates the modification
timestamp of the file specified in the <code class="option">href</code>
option.</p>

<p><a id="err.inline.D0064.6"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0064"><code class="errqname">err:XD0064</code></a>)
if the <code class="option">href</code> option value is not a valid
<code class="type">xs:anyURI</code>. If the <code class="option">href</code> option is
relative, it is made absolute against the base URI of the element on
which it is specified (<code class="tag-element">p:with-option</code> or
<code class="tag-element">p:file-touch</code> in the case of a syntactic shortcut
value).</p>

<p>If the <code class="option">timestamp</code> option is set, the file's
timestamp is set to this value. Otherwise the file's timestamp is set
to the current system's date and time.</p>

<p>If an error occurs and <code class="option">fail-on-error</code> is
<code class="code">false</code>, the step returns a <code class="tag-element">c:error</code> element
which may contain additional, implementation-defined, information
about the nature of the error.</p>

<p>If an error occurs and <code class="option">fail-on-error</code> is
<code class="code">true</code>, one of the following errors is raised:</p>
  <div class="itemizedlist">
    
  <ul><li>
      <p><a id="err.inline.D0011.5"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.D0011"><code class="errqname">err:XD0011</code></a>) if the resource referenced by the
            <code class="option">href</code> option does not exist and cannot be created
or exists and cannot be accessed.</p>
    </li></ul></div>

  <section id="c.file-touch.10" class="simplesect"><div class="section-titlepage"><h3>Document properties</h3></div><div class="content">
    
    <p>No document properties are preserved.</p>
  </div></section>
</div></section>

<section id="errors" class="section"><div class="section-titlepage"><h2><bdi class="secno">10. </bdi>Step Errors<a aria-label="§" class="self-link" href="#errors"></a></h2></div><div class="content">


<p>These steps can raise
<em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>.
</p>

<p><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic
error</em> is one which occurs while a pipeline is being
evaluated.]</span> Examples of dynamic errors include references to
URIs that cannot be resolved, steps which fail, and pipelines that
exhaust the capacity of an implementation (such as memory or disk
space). For a more complete discussion of dynamic errors, see
<cite><a href="xproc/#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="xproc/">XProc 3.0: An XML Pipeline Language</a></cite>.
</p>

<p>If a step fails due to a dynamic error, failure propagates
upwards until either a <code class="tag-element">p:try</code> is encountered or the entire
pipeline fails. In other words, outside of a <code class="tag-element">p:try</code>, step
failure causes the entire pipeline to fail.</p>

<p>The following specific errors can be raised by these steps:</p>

<div id="step-error-summary"><dl class="errs"><dt id="err.C0012"><code class="errqname">err:XC0012</code></dt><dd><p>It is a
          dynamic error if the contents of the directory
          path are not available to the step due to access restrictions in the
          environment in which the pipeline is run.</p><p>See: <a href="#err.inline.C0012">p:directory-list</a></p></dd><dt id="err.C0017"><code class="errqname">err:XC0017</code></dt><dd><p>It is a
        dynamic error if the absolute path does not
        identify a directory.</p><p>See: <a href="#err.inline.C0017">p:directory-list</a></p></dd><dt id="err.C0050"><code class="errqname">err:XC0050</code></dt><dd><p>It is a dynamic error if the URI scheme of the
            target option is not supported or the file or directory cannot be copied to the specified
          location.</p><p>See: <a href="#err.inline.C0050">p:file-copy</a>, <a href="#err.inline.C0050.1">p:file-move</a></p></dd><dt id="err.C0090"><code class="errqname">err:XC0090</code></dt><dd><p>It is a dynamic error if an
        implementation does not support directory listing for a specified scheme.</p><p>See: <a href="#err.inline.C0090">p:directory-list</a></p></dd><dt id="err.C0113"><code class="errqname">err:XC0113</code></dt><dd><p>It is a dynamic error if an attempt is made to delete a non-empty
      directory and the recursive option was set to false.</p><p>See: <a href="#err.inline.C0113">p:file-delete</a></p></dd><dt id="err.C0114"><code class="errqname">err:XC0114</code></dt><dd><p>It is a dynamic error if the directory referenced by the
            href option cannot be created.</p><p>See: <a href="#err.inline.C0114">p:file-mkdir</a></p></dd><dt id="err.C0115"><code class="errqname">err:XC0115</code></dt><dd><p>It is a dynamic error if the resource referenced by the
        target option is an existing file or other file system object.</p><p>See: <a href="#err.inline.C0115">p:file-move</a></p></dd><dt id="err.C0116"><code class="errqname">err:XC0116</code></dt><dd><p>It is a dynamic error if the temporary file could not be
          created.</p><p>See: <a href="#err.inline.C0116">p:file-create-tempfile</a></p></dd></dl></div>

</div></section>

<article id="conformance" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">A. </bdi>Conformance<a aria-label="§" class="self-link" href="#conformance"></a></h2></header><div class="content">


<p>Conformant processors <span class="rfc2119" id="conformance.2.1">must</span> implement all of the features
described in this specification except those that are explicitly identified
as optional.</p>

<p>Some aspects of processor behavior are not completely specified; those
features are either <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> or
<em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</p>

<p><span id="dt-implementation-dependent" class="termdef">[Definition: An
<em class="glossterm">implementation-dependent</em> feature is one where the
implementation has discretion in how it is performed.
Implementations are not required to document or explain
how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.]</span>
</p>

<p><span id="dt-implementation-defined" class="termdef">[Definition: An
<em class="glossterm">implementation-defined</em> feature is one where the
implementation has discretion in how it is performed.
Conformant implementations <span class="rfc2119" id="dt-implementation-defined.2">must</span> document
how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.]</span>
</p>

<section id="implementation-defined" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.1. </bdi>Implementation-defined features<a aria-label="§" class="self-link" href="#implementation-defined"></a></h2></div><div class="content">


<p>The following features are implementation-defined:</p>

<ol class="features"><li>Conformant processors must support directory paths whose
      scheme is file. It is
      implementation-defined what other schemes are
      supported by p:directory-list, and what the interpretation
      of 'directory', 'file' and 'contents' is for those schemes. See <a href="#c.directory-list" title="p:directory-list">Section 2, “p:directory-list”</a>.</li><li>Any file or directory determined to be
          special by the p:directory-list step may be output using a
          c:other element but the criteria for marking a file as
          special are implementation-defined. See <a href="#c.directory-list" title="p:directory-list">Section 2, “p:directory-list”</a>.</li><li>The precise meaning of these properties are
        implementation-defined and may vary according
        to the URI scheme of the path. See <a href="#dir-list-details" title="Directory list details">Section 2.1, “Directory list details”</a>.</li><li>Any other attributes on
        c:file, c:directory, or c:other
        are implementation-defined. See <a href="#dir-list-details" title="Directory list details">Section 2.1, “Directory list details”</a>.</li></ol>
</div></section>

<section id="implementation-dependent" class="section"><div class="section-titlepage"><h2><bdi class="secno">A.2. </bdi>Implementation-dependent features<a aria-label="§" class="self-link" href="#implementation-dependent"></a></h2></div><div class="content">


<p>The following features are implementation-dependent:</p>

<ol class="features"></ol>
</div></section>
</div></article>

<article id="references" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">B. </bdi>References<a aria-label="§" class="self-link" href="#references"></a></h2></header><div class="content">

<div id="references.2" class="bibliolist">
<div id="xproc30" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0</span>] 
<a href="http://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0:
An XML Pipeline Language</cite></span></a>.
Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors.
</p></div>
<div id="xproc30-steps" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0 Steps</span>] 
<a href="http://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0 Steps:
An Introduction</cite></span></a>.
Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors.
</p></div>
<div id="xpath31-functions" class="bibliomixed"><p>[<span class="abbrev">XPath and XQuery Functions and Operators 3.1</span>] 
<a href="https://www.w3.org/TR/xpath-functions-31/"><span class="citetitle"><cite>XPath and XQuery Functions and  Operators 3.1</cite></span></a>. Michael Kay, editor.
W3C Recommendation. 21 March 2017</p></div>
</div>
</div></article>


<article id="glossary" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">C. </bdi>Glossary<a aria-label="§" class="self-link" href="#glossary"></a></h2></header><div class="content"><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error">dynamic
error</a></em></dt><dd class="glossdef"><p>A <em class="firstterm">dynamic
error</em> is one which occurs while a pipeline is being
evaluated.</p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></dt><dd class="glossdef"><p>An
<em class="firstterm">implementation-defined</em> feature is one where the
implementation has discretion in how it is performed.
Conformant implementations <span class="rfc2119" id="glossary.2.2.2.1.2">must</span> document
how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.</p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em></dt><dd class="glossdef"><p>An
<em class="firstterm">implementation-dependent</em> feature is one where the
implementation has discretion in how it is performed.
Implementations are not required to document or explain
how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.</p></dd></dl></div></div></article>

<article id="ancillary-files" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">D. </bdi>Ancillary files<a aria-label="§" class="self-link" href="#ancillary-files"></a></h2></header><div class="content">


<p>This specification includes by reference a number of
ancillary files.</p>

<div class="variablelist">

<dl><dt><span class="term"><a href="steps.xpl">steps.xpl</a></span></dt><dd>
<p>An XProc step library for the declared steps.
</p>
</dd></dl></div>

</div></article>

</article><script src="js/prism.js"></script><script src="js/fixup.js"></script></body></html>