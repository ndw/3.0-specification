<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: Saxonica--><title>Extensible Validation Report Language (XVRL)</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link class="removeOnSave" crossorigin="anonymous" href="https://www.w3.org" rel="preconnect" /><link as="script" class="removeOnSave" href="js/fixup.js" rel="preload" /><link as="style" class="removeOnSave" href="css/base.css" rel="preload" /><link as="image" class="removeOnSave" href="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" rel="preload" /><link rel="stylesheet" href="css/cg-draft.css" /><link rel="stylesheet" href="css/respec.css" /><link rel="alternate" title="XML" href="specification.xml" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.4.3" /><meta name="description" content="Abstract This specification describes a unified vocabulary for validation reports. Its main focus is to express the&#xA;        findings of the most common XML validation languages, Schematron, XML Schema, DTD, and Relax NG. It is meant to&#xA;        be extensible in multiple ways. It should both be able to express the results of other XML validation methods&#xA;        and of validation methods that apply to non-XML formats such as JSON or RDF graphs (irrespective of their&#xA;        serialization format). Another extension axis is that it allows addition of custom attributes or elements. While&#xA;        XVRL at its core is specified in terms of an XML vocabulary with a Relax NG schema, there may also be&#xA;        non-normative serialization formats and schemas, namely a JSON serialization and schema." /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/print.css" media="print" /><script type="text/javascript" src="js/dbmodnizr.js"></script><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><script type="text/javascript">
            function view(doc) {
              var allSpans=document.getElementsByTagName("*");
              if(doc=="old") {
                for(i=0;i!=allSpans.length;i++) {
                  var displayType= "inline";
                  if (allSpans[i].localName == "tr") {
                    displayType= "table-row";
                  } else if (allSpans[i].localName == "li") {
                    displayType= "list-item";
                  }
                  var name=allSpans[i].className;
                  if(name=="deltaxml-new" || name=="deltaxml-new-img" || name=="deltaxml-new-format" || name=="add_version" || name=="modify_version") {
                    allSpans[i].style.display="none";
                  } else if (name=="deltaxml-old" || name=="deltaxml-old-img" || name=="deltaxml-old-format" || name=="delete_version") {
                    allSpans[i].style.display= displayType;
                    allSpans[i].style.background="#FFF";
                    //need to take border off images
                    var allImgs=allSpans[i].getElementsByTagName("img");
                    for(j=0;j!=allImgs.length;j++) {
                      allImgs[j].style.border="none";
                    }
                  }
                }
              } else if(doc=="new") {
                for(i=0;i!=allSpans.length;i++) {
                  var displayType= "inline";
                  if (allSpans[i].localName == "tr") {
                    displayType= "table-row";
                  } else if (allSpans[i].localName == "li") {
                    displayType= "list-item";
                  }
                  var name=allSpans[i].className;
                  if(name=="deltaxml-new" || name=="deltaxml-new-img" || name=="deltaxml-new-format" || name=="add_version") {
                    allSpans[i].style.display= displayType;
                    allSpans[i].style.background="#FFF";
                    //need to take border off images
                    var allImgs=allSpans[i].getElementsByTagName("img");
                    for(j=0;j!=allImgs.length;j++) {
                      allImgs[j].style.border="none";
                    }
                  } else if (name=="deltaxml-old" || name=="deltaxml-old-img" || name=="deltaxml-old-format" || name=="delete_version" || name=="modify_version") {
                    allSpans[i].style.display="none";
                   }
                }
              } else if(doc=="both") {
                for(i=0;i!=allSpans.length;i++) {
                  var displayType= "inline";
                  if (allSpans[i].localName == "tr") {
                    displayType= "table-row";
                  } else if (allSpans[i].localName == "li") {
                    displayType= "list-item";
                  }
                  var name=allSpans[i].className;
                  if(name=="deltaxml-new" || name=="deltaxml-new-format" || name=="deltaxml-new-img") {
                    allSpans[i].style.display= displayType;
                    allSpans[i].style.background="#90EE90";
                    //need to add border to images
                    var allImgs=allSpans[i].getElementsByTagName("img");
                    for(j=0;j!=allImgs.length;j++) {
                      allImgs[j].style.border="2px solid green";
                    }
                  } else if(name=="deltaxml-old" || name=="deltaxml-old-format" || name=="deltaxml-old-img") {
                    allSpans[i].style.display= displayType;
                    allSpans[i].style.background="#FF5555";
                    //need to add border to images
                    var allImgs=allSpans[i].getElementsByTagName("img");
                    for(j=0;j!=allImgs.length;j++) {
                      allImgs[j].style.border="2px solid red";
                    }
                  } else if (name=="add_version" || name=="delete_version") {
                    allSpans[i].style.display="none";
                  } else if (name=="modify_version") {
                    allSpans[i].style.display= displayType;
                  }
                }
              }
            }
  
        </script></head><body><div style="position:fixed; clear:both; top:0px"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a></p></div><attribute name="class" select="'h-entry informative toc-sidebar'"></attribute><div id="spec.head" class="head"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" /></a><h1 id="title" class="title p-name">Extensible Validation Report Language (XVRL)</h1><h2>Draft Community Group Report <time class="dt-published" datetime="2019-01-04">3 January 2020</time></h2><div class="editors-draft">Editor's Draft at <span class="deltaxml-old" style="background:#FF5555">19:57</span><span class="deltaxml-new" style="background:#90EE90">20:06</span> UTC (<a href="https://github.com/xproc/xvrl/commit/ea7d218ea452d34a3cfb6a8e3959a8e7e77282f1">build <span class="deltaxml-old" style="background:#FF5555">12</span><span class="deltaxml-new" style="background:#90EE90">14</span></a>)</div><dl><dt>Latest editor’s draft:</dt><dd><a href="http://spec.xproc.org/master/head/xvrl/">http://spec.xproc.org/master/head/xvrl/</a></dd><dt>Editors:</dt><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Matthieu Ricaud-Dussarget</span></dd><dd><span class="personname">Norman Walsh</span></dd><dt>Participate:</dt><dd><a href="http://github.com/">GitHub </a></dd><dd><a href="http://github.com//issues">Report an issue</a></dd><dt>Changes:</dt><dd><a href="diff.html">Diff against current “status quo” draft</a></dd><dd><a href="http://github.com/xproc/xvrl/commits/master">Commits for this specification</a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a>, automatic change markup <a href="diff.html">from the previous draft</a> courtesy of <a href="http://www.deltaxml.com/">DeltaXML</a>.</p><p class="copyright"><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2019</span> the Contributors to the <cite>Extensible Validation Report Language (XVRL)</cite> specification, published by the <a href=""> Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</p></p><hr title="Separator for header" /><section id="abstract" class="introductory"><h2>Abstract</h2><p>This specification describes a unified vocabulary for validation reports. Its main focus is to express the findings of the most common XML validation languages, Schematron, XML Schema, DTD, and Relax NG. It is meant to be extensible in multiple ways. It should both be able to express the results of other XML validation methods and of validation methods that apply to non-XML formats such as JSON or RDF graphs (irrespective of their serialization format). Another extension axis is that it allows addition of custom attributes or elements. While XVRL at its core is specified in terms of an XML vocabulary with a Relax NG schema, there may also be non-normative serialization formats and schemas, namely a JSON serialization and schema.</p></section><section id="sotd" class="introductory"><h2>Status of this Document</h2><p><strong>This document is an editor's draft that has no official standing.</strong></p><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document.</em></p></section></div><div class="lists-of-titles"><nav id="toc"><h2 id="TableOfContents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#xvrl-vocabulary"><bdi class="secno">2. </bdi>XVRL Vocabulary</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#xvrl-vocabulary-structure"><bdi class="secno">2.1. </bdi>Document Structure</a></li><li class="tocline"><a class="tocxref" href="#xvrl-vocabulary-detection"><bdi class="secno">2.2. </bdi>Detection</a></li><li class="tocline"><a class="tocxref" href="#xvrl-vocabulary-metadata"><bdi class="secno">2.3. </bdi>Metadata</a></li></ul></li><li class="tocline"><a class="tocxref" href="#xvrl-schema"><bdi class="secno">A. </bdi>The XVRL Schema</a></li><li class="tocline"><a class="tocxref" href="#xvrl-generation"><bdi class="secno">B. </bdi>Parameters for Controlling XVRL Generation</a></li><li class="tocline"><a class="tocxref" href="#xvrl-xslt"><bdi class="secno">C. </bdi>XSLT Stylesheets (Non-Normative)</a></li></ol></nav></div><article class="specification"><section id="introduction" class="section"><div class="section-titlepage"><h2><bdi class="secno">1. </bdi>Introduction<a aria-label="§" class="self-link" href="#introduction"></a></h2></div><div class="content"><p>XVRL provides a unified format for expressing possibly multiple validation methods, applied to possibly multiple documents. The need arises because not every validation language has a standardized report format, making it difficult to render the results of multiple validations in a single report.</p></div></section><section id="xvrl-vocabulary" class="section"><div class="section-titlepage"><h2><bdi class="secno">2. </bdi>XVRL Vocabulary<a aria-label="§" class="self-link" href="#xvrl-vocabulary"></a></h2></div><div class="content"><p>XVRL elements are in the namespace <code class="uri">http://www.xproc.org/ns/xvrl</code>. XVRL documents may contain elements in other namespaces at certain locations. The XVRL elements and attributes and their semantics are given in the following lists. More details about the XVRL grammar are encoded in the Relax NG Compact Syntax version of the XVRL schema, which is also normative.</p><section id="xvrl-vocabulary-structure" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.1. </bdi>Document Structure<a aria-label="§" class="self-link" href="#xvrl-vocabulary-structure"></a></h3></div><div class="content"><div class="glosslist"><dl><dt id="v.detection" class="glossentry"><em class="glossterm"><code class="tag-element">detection</code> element</em></dt><dd class="glossdef"><p>A single finding, typically with an associated error code and/or message(s). A <code class="tag-element">report</code> element primarily contains <code class="tag-element">detection</code> elements. See <a href="#xvrl-vocabulary-detection" title="Detection">Section 2.2, “Detection”</a> for details.</p></dd><dt id="v.digest" class="glossentry"><em class="glossterm"><code class="tag-element">digest</code> element</em></dt><dd class="glossdef"><p>A <code class="tag-element">report</code> may contain a <code class="tag-element">digest</code> element in order to provide a summary of the <code class="tag-element">detection</code> elements. For the distinct severity levels, counts of the <code class="tag-element">detection</code> elements for a given level may be specified on <code class="tag-element">digest</code>, for example in an <code class="tag-attribute">@error-count</code> attribute. In addition, the <code class="tag-attribute">@worst</code> attribute may give the highest severity level that occurs in the <code class="tag-element">detection</code> elements that are contained by the <code class="tag-element">digest</code>’s parent element.</p><p>A <code class="tag-element">digest</code> element may occur in addition to or instead of <code class="tag-element">detection</code> elements. If no <code class="tag-element">detection</code> element is included, a <code class="tag-element">digest</code> element <span class="rfc2119" id="v.digest.2.2.5">must</span> be included.</p><p>All information in digest is understood to be aggregated at some point from the actual detection elements. It is the responsibility of an XVRL creating/processing application to keep them up to date or to remove them when the underlying detection information is changed. A digest may be inserted either before or after the detection elements.</p></dd><dt id="v.metadata" class="glossentry"><em class="glossterm"><code class="tag-element">metadata</code> element</em></dt><dd class="glossdef"><p>Information about the time of validation, the validator used, the document(s) under test, etc. See <a href="#xvrl-vocabulary-metadata" title="Metadata">Section 2.3, “Metadata”</a> for details.</p><p>A single <code class="tag-element">metadata</code> element need not contain all relevant metadata. Metadata infomation will be inherited from surrounding <code class="code">reports/metadata</code> elements, that is, if a given <code class="tag-element">metadata</code> does not provide <code class="tag-element">validator</code> information but the parent <code class="code">reports/metadata</code> does, the parent’s <code class="code">metadata/validator</code> will also pertain to the current <code class="tag-element">metadata</code> element’s siblings and their descendants, unless overridden further down.</p></dd><dt id="v.report" class="glossentry"><em class="glossterm"><code class="tag-element">report</code> element</em></dt><dd class="glossdef"><p>The result of a single validation method, typically using a single schema, typically applied to a single document (also referred to as the <em class="firstterm">source document</em>). The individual errors (or other findings) are included as <code class="tag-element">detection</code> elements.</p><div id="ednote.naming-things" class="note editorial admonition"><h3>Naming things…</h3><div class="admonition-body"><p>Previously, what is called “detection” here was called “report”, while a collection of detections was called “validation-report”. Now this collection ist called “report”, while a collection of (new-terminology) reports is now called “reports” (previously: “validation-reports”). I changed the names because I didn’t think that both an individual finding and a collection of individual findings should both be called a “report”, with the prefix “validation-” discerning between both. Since the individual finding is also the result of a validation, there is no reason it couldn’t have been called “validation-report” in the first place. It took quite some time to come up with a term for the individual findings. Candidates were: “finding”, “observation”, “detection”, “incidence”, and “incident”. I’m willing to rename it to something that seems more fitting.</p></div></div></dd><dt id="v.reports" class="glossentry"><em class="glossterm"><code class="tag-element">reports</code> element</em></dt><dd class="glossdef"><p>A collection of <code class="tag-element">report</code> elements. It may contain the same <code class="tag-element">metadata</code> information as a single <code class="tag-element">report</code> in order to denote common information, for example if all validations have been applied to the same document or if all validations use the same schema or validation engine.</p><p><code class="tag-element">reports</code> elements may nest in order to group <code class="tag-element">report</code> elements with common sets of metadata.</p></dd></dl></div></div></section><section id="xvrl-vocabulary-detection" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.2. </bdi>Detection<a aria-label="§" class="self-link" href="#xvrl-vocabulary-detection"></a></h3></div><div class="content"><p>As described in <a href="#xvrl-vocabulary-structure" title="Document Structure">Section 2.1, “Document Structure”</a>, <code class="tag-element">detection</code> is the main container for individual validation findings. It contains optional <code class="tag-attribute">severity</code> and <code class="tag-attribute">code</code> attributes, and the following elements in arbitrary order:</p><div class="glosslist"><dl><dt id="v.category" class="glossentry"><em class="glossterm"><code class="tag-element">category</code> element(s)</em></dt><dd class="glossdef"><p>In order to filter or group messages for a formatted report, individual <code class="tag-element">detection</code>s may be categorized according to arbitrary category systems, using the repeatable <code class="tag-element">category</code> element. Its optional attribute <code class="tag-attribute">vocabulary</code> can hold a string that designates the category system. There are no pre-defined values to choose from.</p><p>Categorization that applies to all <code class="tag-element">detection</code>s in a <code class="tag-element">report</code> can be included in the <code class="tag-element">report</code>’s <code class="tag-element">metadata</code>.</p></dd><dt id="v.code" class="glossentry"><em class="glossterm"><code class="tag-attribute">code</code> attribute</em></dt><dd class="glossdef"><p>An error code. The term “error code” is used in a colloquial sense here. It need not relate to an error, but to any kind of message that has a distinctive identifying string.</p></dd><dt id="v.context" class="glossentry"><em class="glossterm"><code class="tag-element">context</code> element</em></dt><dd class="glossdef"><p>The purpose of this element is to present a piece of content that surrounds the element that the detection pertains to. It contains an optional <code class="tag-element">location</code> element, followed by (optional) arbitrary text or non-XVRL element content.</p></dd><dt id="v.location" class="glossentry"><em class="glossterm"><code class="tag-element">location</code> element</em></dt><dd class="glossdef"><p>Within a single <code class="tag-element">detection</code> element, the location in the source document that the validation error, warning, etc. pertains to is given by the <code class="tag-element">location</code> element’s attributes.</p><p>If not present, <code class="tag-attribute">href</code> is taken from the closest ancestor’s <code class="code">metadata/document/@href</code> attribute. If there are multiple <code class="code">document/@href</code> attributes in the closest ancestor’s metadata, the <code class="tag-attribute">href</code> attribute should not be omitted on <code class="tag-element">location</code>, or at least a disambiguating relative URI should be given in the <code class="code">location/@href</code> attribute.</p><p>The attribute <code class="tag-attribute">xpath</code> contains an XPath expression that gives the location within the document. The in-scope value of the attribute <code class="tag-attribute">xpath-default-namespace</code> that is permitted on any element may give a namespace for the element names in this XPath expression. Apart from that, the <code class="code">Q{namespace-uri}local-name</code> syntax <span class="rfc2119" id="v.location.2.3.4">should</span> be used, but in-scope namespace prefixes or XPath predicates like <code class="code">[namespace-uri() = 'uri']</code> may also be used.</p><p>The attributes <code class="tag-attribute">line</code> and <code class="tag-attribute">column</code> may also be used to point at lines and columns in a textual representation of the source document.</p><p>The attribute <code class="tag-attribute">octet-position</code> may be used to give the byte position (1-offset) of the error. This may be useful for binary documents.</p><p>In order to support JSON document validations, the attributes <code class="tag-attribute">jsonpath</code> and <code class="tag-attribute">jsonpointer</code> may be used.</p><p>Giving multiple alternative pointers is not forbidden. However, it is beyond the scope of this specification to define mechanisms to enforce or check consistency between the attribute values. It is evident that <code class="tag-attribute">jsonpointer</code> or <code class="tag-attribute">jsonpath</code> are meaningless in the context of XML documents.</p><p>Other attributes are permitted if they are in a non-XVRL namespace.</p></dd><dt id="v.message" class="glossentry"><em class="glossterm"><code class="tag-element">message</code> element</em></dt><dd class="glossdef"><p>An error message that pertains to a <code class="tag-element">detection</code>. There may be multiple <code class="tag-element">message</code> elements in a single <code class="tag-element">detection</code> element, typically to convey localized versions of essentially the same message. A message may contain arbitrary markup in non-XVRL namespaces. Messages are typically generated for consumption by humans.</p><div id="n.error-msg-code-colloquial" class="note admonition"><h3>Note</h3><div class="admonition-body"><p>Whenever the term “error message” is used in a colloquial sense (that is, not highlighted as the severity level “<code class="literal">error</code>” or as the XVRL element “<code class="tag-element">message</code>”) throughout this specification, a <code class="tag-element">detection</code> element with any <code class="tag-attribute">@severity</code> level, not necessarily “<code class="literal">error</code>”, and any number of localized <code class="tag-element">message</code>s is implied. Likewise, the term “error code” does not imply the severity level “<code class="literal">error</code>”.</p></div></div></dd><dt id="v.provenance" class="glossentry"><em class="glossterm"><code class="tag-element">provenance</code> element</em></dt><dd class="glossdef"><p>In multi-step conversion pipelines it is sometimes required to save a common origin location that a portion of the validated document is derived from. This may be necessary in order to patch back error messages of later conversion stages into the source document.</p><p>The optional <code class="tag-element">provenance</code> element within a <code class="tag-element">detection</code> conveys exactly this information, in a contained <code class="tag-element">location</code> element that points to the provenance location in the original source document. A <code class="tag-element">provenance</code> element may contain multiple <code class="tag-element">location</code> elements; it is up to processing applications to discern between different roles that they may have.</p><p>Although it is possible to omit the <code class="tag-attribute">@href</code> attribute in the contained <code class="tag-element">location</code> elements, this URI is not inherited from a containing element’s <code class="code">metadata/document/@href</code> attribute.</p></dd><dt id="v.severity" class="glossentry"><em class="glossterm"><code class="tag-attribute">severity</code> attribute</em></dt><dd class="glossdef"><p>The <code class="tag-attribute">severity</code> attribute is permitted on a <code class="tag-element">detection</code> element. XVRL establishes a finite set of error levels that correspond to the impact of a detected issue. Each <code class="tag-element">detection</code> element may have a severity level, from highest (worst impact) to lowest, of “<code class="literal">fatal-error</code>”, “<code class="literal">error</code>”, “<code class="literal">warning</code>”, or “<code class="literal">info</code>”. In addition, the <code class="tag-attribute">severity</code> attribute may have the value “<code class="literal">unspecified</code>” which is equivalent to omitting the attribute.</p><div id="n.severities" class="note admonition"><h3>Note</h3><div class="admonition-body"><p>Which severity level is attached to a given error code depends on, among other things, the audience that the validation report is prepared for. For Schematron’s SVRL output, the values of <code class="code">@role</code> will typically translate to XVRL <code class="code">@severity</code> attributes, but this mapping may be configured, see below.</p></div></div></dd><dt id="v.summary" class="glossentry"><em class="glossterm"><code class="tag-element">summary</code> element(s)</em></dt><dd class="glossdef"><p>An abstract of a <code class="tag-element">report</code>, a <code class="tag-element">reports</code> collection, or an individual <code class="tag-element">detection</code>. This element is repeatable, for example, in order to support multiple natural languages. In the context of <code class="tag-element">detection</code>, it can serve as an abridged version of a full message that contains lengthy lists and the like.</p></dd><dt id="v.supplemental" class="glossentry"><em class="glossterm"><code class="tag-element">supplemental</code> element(s)</em></dt><dd class="glossdef"><p>This repeatable element may contain arbitrary textual or non-XVRL element content. It may appear in <code class="tag-element">metadata</code> and in <code class="tag-element">detection</code>. Its <code class="tag-attribute">role</code> attribute may be used to further classify the purpose of its content. Like any other XVRL element, it may be localized using the <code class="tag-attribute">xml:lang</code> attribute.</p><p>Purposes can be, but are not limited to, conveying the SVRL source that the XVRL report was created from, or a disclaimer, a confidentiality statement, or introductory content that should be included in a rendered report.</p></dd></dl></div></div></section><section id="xvrl-vocabulary-metadata" class="section"><div class="section-titlepage"><h3><bdi class="secno">2.3. </bdi>Metadata<a aria-label="§" class="self-link" href="#xvrl-vocabulary-metadata"></a></h3></div><div class="content"><p>All elements in this section are optional within <code class="tag-element">metadata</code>. The order in which they appear is arbitrary. Some are repeatable.</p><div class="glosslist"><dl><dt id="v.creator" class="glossentry"><em class="glossterm"><code class="tag-element">creator</code> element</em></dt><dd class="glossdef"><p>Information about the tool that created the source document. There is no content, only the optional attributes <code class="tag-attribute">@name</code>, <code class="tag-attribute">@version</code>, and <code class="tag-attribute">@invocation</code>. The <code class="tag-attribute">@invocation</code> attribute is meant to hold a command line that contains the invocation of the program that was responsible for generating the source document. This information can be useful for later diagnosing dependencies between errors and command line options.</p></dd><dt id="xvrl-vocabulary-metadata.3.2" class="glossentry"><em class="glossterm"><code class="tag-element">category</code> element(s)</em></dt><dd class="glossdef"><p>See <a href="#v.category"><code class="tag-element">category</code> element(s)</a></p></dd><dt id="v.document" class="glossentry"><em class="glossterm"><code class="tag-element">document</code> element(s)</em></dt><dd class="glossdef"><p>The URI of a source document may be specified in the <code class="tag-attribute">href</code> attribute. In addition or instead, the document may be given as the element content. See also <a href="#v.location"><code class="tag-element">location</code> element</a> about inheritance of <code class="tag-attribute">href</code>.</p></dd><dt id="v.schema" class="glossentry"><em class="glossterm"><code class="tag-element">schema</code> element(s)</em></dt><dd class="glossdef"><p>The URI of a schema document may be specified in the <code class="tag-attribute">href</code> attribute. In addition or instead, the document may be given as the element content. The namespace of the schema may be given in the attribute <code class="tag-attribute">schematypens</code>. The version of the schema language may be given in the attribute <code class="tag-attribute">version</code>.</p></dd><dt id="xvrl-vocabulary-metadata.3.5" class="glossentry"><em class="glossterm"><code class="tag-element">summary</code> element(s)</em></dt><dd class="glossdef"><p>See <a href="#v.summary"><code class="tag-element">summary</code> element(s)</a>.</p></dd><dt id="xvrl-vocabulary-metadata.3.6" class="glossentry"><em class="glossterm"><code class="tag-element">supplemental</code> element(s)</em></dt><dd class="glossdef"><p>See <a href="#v.supplemental"><code class="tag-element">supplemental</code> element(s)</a>.</p></dd><dt id="v.timestamp" class="glossentry"><em class="glossterm"><code class="tag-element">timestamp</code> element</em></dt><dd class="glossdef"><p>&gt;The content needs to be an <code class="literal">xsd:dateTime</code> value, for example “<code class="literal">2017-12-04T12:21:37.381+01:00</code>”.</p></dd><dt id="v.title" class="glossentry"><em class="glossterm"><code class="tag-element">title</code> element(s)</em></dt><dd class="glossdef"><p>The title of a <code class="tag-element">report</code>, a <code class="tag-element">reports</code> collection, or an individual <code class="tag-element">detection</code>. This element is repeatable, for example, in order to support multiple natural languages.</p></dd><dt id="v.validator" class="glossentry"><em class="glossterm"><code class="tag-element">validator</code> element</em></dt><dd class="glossdef"><p>Information about the validation program that generated the report(s) or the underlying messages (if XVRL was not generated natively by the program). There are optional attributes <code class="tag-attribute">@name</code> and <code class="tag-attribute">@version</code>, both are arbitrary strings. Arbitrary text or element (in a non-XVRL namespace) content may be contained, for example to describe a configuration or to include an actual configuration file.</p></dd></dl></div></div></section></div></section><article id="xvrl-schema" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">A. </bdi>The XVRL Schema<a aria-label="§" class="self-link" href="#xvrl-schema"></a></h2></header><div class="content"><pre class="programlisting language-none line-numbers"><code># Schema for XML Validation Report Language; adapted from a proposal # by Matthieu Ricaud incorporating some suggestions by Gerrit Imsieke # See https://github.com/xproc/3.0-steps/issues/15 namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0" namespace local = "" default namespace xvrl = "http://www.xproc.org/ns/xvrl" start = reports | report xmllang.attr = attribute xml:lang { xsd:language } xmlid.attr = attribute xml:id { xsd:ID } xmlbase.attr = attribute xml:base { xsd:anyURI } # Default namespace URI for location XPaths: xpdns.attr = attribute xpath-default-namespace { xsd:anyURI } anyother.attr = attribute * - (local:* | xvrl:* | xml:*) { text } any.attr = attribute * - xvrl:* { text } message.attr = attribute (* - (xvrl:* | xml:*)) { text } common.attr = xmllang.attr? &amp; xmlid.attr? &amp; xmlbase.attr? &amp; xpdns.attr? &amp; anyother.attr* href.attr = attribute href { xsd:anyURI } any.element = element * - xvrl:* { (any.attr | text | any.element)* } reports = element reports { common.attr, report.metadata, (report | reports | digest)+ } report = element report { common.attr, report.metadata, ((digest?, detection+) | (detection+, digest) | digest) } ## All information in digest is understood to be aggregated at some point from the actual detection elements. ## It is the responsibility of an XVRL creating/processing application to keep them up to date or to remove them ## when the underlying detection information is changed. If the individual detections are omitted, a digest must be present. ## A digest may be inserted either before or after the detection elements. digest = element digest { common.attr, attribute valid { "true" | "false" | "partial" | "undetermined" }?, attribute fatal-error-count { xsd:integer }?, attribute error-count { xsd:integer }?, attribute warning-count { xsd:integer }?, attribute info-count { xsd:integer }?, attribute unspecified-count { xsd:integer }?, attribute fatal-error-codes { list { token* } }?, attribute error-codes { list { token* } }?, attribute warning-codes { list { token* } }?, attribute info-codes { list { token* } }?, attribute unspecified-codes { list { token* } }?, attribute worst { "fatal-error" | "error" | "warning" | "info" | "nothing" | "unspecified" }? } report.metadata = element metadata { common.attr, (timestamp? &amp; validator? &amp; creator? &amp; document* &amp; title* &amp; summary* &amp; category* &amp; schema* &amp; supplemental*) } document = element document { common.attr, href.attr?, (text | any.element) } detection = element detection { common.attr, attribute severity { "info" | "warning" | "error" | "fatal-error" | "unspecified" }?, attribute code { text }?, (location? &amp; provenance? &amp; title* &amp; summary* &amp; category* &amp; (let*, message*) &amp; supplemental* &amp; context?) } let = element let { common.attr, attribute name { xsd:QName }, (attribute value {xsd:string} | (text | any.element))* } value-of = element value-of { attribute name { xsd:QName } } location = element location { location.model } location.model = xpdns.attr?, # XPaths may use the Q{namespace-uri}local-name notation. attribute xpath { text }?, # These are different syntaxes to address JSON documents. # JSON docs may be represented as XPath maps and arrays # and then addressed via, e.g., xpath=".(3)('foo')" # for the 3rd array item, which is a map, and then the map’s # value for the 'foo' key. attribute jsonpointer { text }?, attribute jsonpath { text }?, attribute href { xsd:anyURI }?, attribute line { xsd:positiveInteger }?, attribute column { xsd:positiveInteger }?, # For binary data: attribute octet-position { xsd:positiveInteger }?, anyother.attr* provenance = element provenance { location+ } message = element message { common.attr, (text | message.element)* } message.element = element (* - (xvrl:* - xvrl:value-of)) { (message.attr | text | message.element | value-of)* } supplemental = element supplemental { common.attr, (text | any.element)* } context = element context { common.attr, location?, (text | any.element)* } validator = element validator { common.attr, attribute name { text }, attribute version { text }?, (text | any.element)* } creator = element creator { common.attr, attribute name { text }, attribute version { text }?, element invocation { text }? } schema = element schema { common.attr, attribute href { xsd:anyURI }?, attribute schematypens { xsd:anyURI }, attribute version { text }?, (text | any.element)? } title = element title { common.attr, (text | any.element)* } summary = element summary { common.attr, (text | any.element)* } category = element category { common.attr, attribute vocabulary { xsd:token }?, (text | any.element)* } timestamp = element timestamp { common.attr, xsd:dateTime }</code></pre></div></article><article id="xvrl-generation" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">B. </bdi>Parameters for Controlling XVRL Generation<a aria-label="§" class="self-link" href="#xvrl-generation"></a></h2></header><div class="content"><p>The following parameters should be understood by XVRL report generators when converting underlying validation reports, for example, from SVRL or from the XProc error vocabulary, <code class="tag-element">c:errors</code> etc.</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">xvrl:default-severity</code></span></dt><dd><p>When no severity is associated with a source vocabulary element that is mapped to <code class="tag-element">detection</code>, this property can be specified in order to assign a default severity to any of these source vocabulary constructs. It can be argued that the XProc error vocabulary, <code class="tag-element">c:error</code>, already conveys the severity level <code class="literal">error</code>. The view that this specification takes is to regard these messages as generic findings of severity “<code class="literal">error</code>”, but that the <code class="literal">xvrl:default-severity</code> may be given to override this.</p><p>Implementations are free to provide other parameters, in a different namespace, that permit a more detailed mapping, for example from error code to severity.</p></dd><dt><span class="term"><code class="literal">xvrl:serialization-format</code></span></dt><dd><p>Anticipates future alternative serialization If no value is given, <code class="literal">xml</code> is assumed. Other possible values may be, but are not limited to, <code class="literal">json</code>, <code class="literal">rdf/xml</code>, <code class="literal">turtle</code>.</p></dd><dt><span class="term"><code class="literal">xvrl:language</code></span></dt><dd><p>A space separated list of language abbreviations, typically according to ISO 639-1. The preferred language is given first, followed by fallback languages. The result is that localized elements within a <code class="tag-element">detection</code> will be reduced to messages, categories, or summaries in the preferred language. Example: <code class="literal">de en</code> instructs the XVRL generator to include German messages only and to use an English message when no German message is present. If no language matches for a given localizable element in a <code class="tag-element">detection</code> context, a corresponding element with the same attributes, but with no <code class="tag-attribute">xml:lang</code> attribute, should be included. Localizable elements with an <code class="tag-attribute">xml:lang</code> attribute that is not listed in this property should be ignored.</p></dd><dt><span class="term"><code class="literal">xvrl:map-to-severity</code></span></dt><dd><p>This parameter contains space-separated QNames that correspond to elements or attributes of an underlying reporting language, in particular SVRL attributes. A value of <code class="literal">flag role</code> instructs an SVRL to XVRL converter to preferentially map the SVRL <code class="tag-attribute">flag</code> attribute to the XVRL <code class="tag-attribute">severity</code> attribute. If it is not present or its value cannot be mapped, it should try to map the SVRL <code class="tag-attribute">role</code> value to XVRL’s <code class="tag-attribute">severity</code>.</p><p>The following attribute values are considered mappable, after folding the source value to lower case: “information”, “informational” map to “info”; “warn” maps to “warning”; “fatal” maps to ”fatal-error”. A conversion tool may consider other variants, including translations that correspond to the natural language of the corresponding error message, for mapping.</p><p>If the content of an (for example) SVRL attribute cannot be mapped, it should be attached to the corresponding XVRL <code class="tag-element">detection</code> either as a category or as a namespaced attribute (that is, <code class="literal">role="foo"</code> in SVRL may become <code class="literal">svrl:role="foo"</code> in XVRL, with <code class="literal">xmlns:svrl="http://purl.oclc.org/dsdl/svrl"</code>).</p></dd><dt><span class="term"><code class="literal">xvrl:xpath-notation</code></span></dt><dd><p>This parameter controls how XPath attributes given in <code class="tag-element">location</code> elements should be structured. Possible values are “<code class="literal">Q</code>”, “<code class="literal">namespace-uri</code>“, and “<code class="literal">name</code>”.</p><p>Example: The path <code class="code">/TEI/text[1]</code> in the namespace <code class="literal">http://www.tei-c.org/ns/1.0</code> will be represented in these notations as follows:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">Q</code></span></dt><dd><p><code class="code">/Q{http://www.tei-c.org/ns/1.0}TEI/Q{http://www.tei-c.org/ns/1.0}text[1]</code></p></dd><dt><span class="term"><code class="literal">namespace-uri</code></span></dt><dd><p><code class="code">/*:TEI[namespace-uri()='http://www.tei-c.org/ns/1.0']/*:text[namespace-uri()='http://www.tei-c.org/ns/1.0'][1]</code></p><p>This corresponds to the parameter setting <code class="literal">full-path-notation=1</code> in the SVRL output of the Schematron skeleton implementation.</p></dd><dt><span class="term"><code class="literal">name</code></span></dt><dd><p><code class="code">/tei:TEI/tei:text[1]</code></p><p>This corresponds to the parameter setting <code class="literal">full-path-notation=2</code> in the SVRL output of the Schematron skeleton implementation. It takes namespace prefix declarations from the source document and it needs to copy these declarations to an appropriate location in the resulting XVRL document.</p></dd></dl></div><p>If the XVRL attribute <code class="tag-attribute">xpath-default-namespace</code> is present on an ancestor element, the namespace URI given in this attribute on the closest ancestor should be used to omit this namespace from the resulting XPath. If <code class="literal">xpath-default-uri="http://www.tei-c.org/ns/1.0"</code> is in force in a given context, the paths in any of the three notations should reduce to <code class="code">/TEI/text[1]</code>.</p><p>If an XVRL-generating application is unable to generate the preferred notation, any XPath notation that it can produce is acceptable.</p></dd></dl></div></div></article><article id="xvrl-xslt" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">C. </bdi>XSLT Stylesheets (Non-Normative)<a aria-label="§" class="self-link" href="#xvrl-xslt"></a></h2></header><div class="content"><p>As a convenience, XSLT stylesheets will be made available for the following purposes:</p><div class="variablelist"><dl><dt><span class="term">SVRL → XVRL conversion</span></dt><dd><p>It is recommended that XProc processor vendors make this XSLT available under the import URI <code class="uri">http://xproc.org/xvrl/xsl/svrl2xvrl.xsl</code>.</p></dd><dt><span class="term"><code class="tag-element">c:errors</code> → XVRL conversion</span></dt><dd><p>It is recommended that XProc processor vendors make this XSLT available under the import URI <code class="uri">http://xproc.org/xvrl/xsl/c-errors2xvrl.xsl</code>.</p></dd><dt><span class="term">Filter/transform XVRL</span></dt><dd><p>It is recommended that XProc processor vendors make this XSLT available under the import URI <code class="uri">http://xproc.org/xvrl/xsl/xvrl2xvrl.xsl</code>.</p></dd></dl></div><p>All stylesheets accept the parameters given in <a href="#xvrl-generation" title="Parameters for Controlling XVRL Generation">Appendix B, <i>Parameters for Controlling XVRL Generation</i></a>.</p></div></article></article><script src="js/prism.js"></script><script src="js/fixup.js"></script></body></html>