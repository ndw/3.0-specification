<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: Saxonica--><title>XProc 3.0: validation steps</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link class="removeOnSave" crossorigin="anonymous" href="https://www.w3.org" rel="preconnect" /><link as="script" class="removeOnSave" href="js/fixup.js" rel="preload" /><link as="style" class="removeOnSave" href="css/base.css" rel="preload" /><link as="image" class="removeOnSave" href="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" rel="preload" /><link rel="stylesheet" href="css/cg-draft.css" /><link rel="stylesheet" href="css/respec.css" /><link rel="alternate" title="XML" href="specification.xml" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.5.0" /><meta name="description" content="Abstract This specification describes the&#xA;p:validate-with-nvdl,&#xA;p:validate-with-relax-ng,&#xA;p:validate-with-schematron,&#xA;p:validate-with-xml-schema,&#xA;p:validate-with-json-schema, and&#xA;p:validate-with-dtd&#xA;step for&#xA;XProc 3.0: An XML Pipeline Language." /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/print.css" media="print" /><script type="text/javascript" src="js/dbmodnizr.js"></script><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css" /></head><body class="h-entry informative toc-sidebar"><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p></div><div class="head" id="spec.head"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" /></a><h1 id="title" class="title p-name">XProc 3.0: validation steps</h1><h2>Draft Community Group Report <time class="dt-published" datetime="2024-08-15">15 August 2024</time></h2><div class="editors-draft">Editor's Draft at <time class="dt-timestamp" datetime="20240815T16:19:40Z">16:<span class="deltaxml-old" style="background:#FF5555">05</span><span class="deltaxml-new" style="background:#90EE90">19</span> UTC</time> (<a href="https://github.com/xproc//commit/806bec009e824c948fdca2a6adb3078361892f00">build <span class="deltaxml-old" style="background:#FF5555">46</span><span class="deltaxml-new" style="background:#90EE90">47</span></a>)</div><dl><dt>Latest editor’s draft:</dt><dd><a href="https://spec.xproc.org/master/head/validation/">https://spec.xproc.org/master/head/validation/</a></dd><dt>Editors:</dt><dd><span class="personname">Norman Walsh</span></dd><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dt>Participate:</dt><dd><a href="http://github.com/xproc/3.0-steps">GitHub xproc/3.0-steps</a></dd><dd><a href="http://github.com/xproc/3.0-steps/issues">Report an issue</a></dd><dt>Changes:</dt><dd><a href="diff.html">Diff against current “status quo” draft</a></dd><dd><a href="http://github.com/xproc//commits/">Commits for this specification</a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a> and HTML with automatic change markup courtesy of <a href="http://www.deltaxml.com/">DeltaXML</a>.</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020</span> the Contributors to the <cite>XProc 3.0: validation steps</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</p><hr title="Separator for header" /><section id="abstract" class="introductory"><h2>Abstract</h2><p>This specification describes the <code class="code">p:validate-with-nvdl</code>, <code class="code">p:validate-with-relax-ng</code>, <code class="code">p:validate-with-schematron</code>, <code class="code">p:validate-with-xml-schema</code>, <code class="code">p:validate-with-json-schema</code>, and <code class="code">p:validate-with-dtd</code> step for <em class="citetitle">XProc 3.0: An XML Pipeline Language</em>.</p></section><section id="sotd" class="introductory"><h2>Status of this Document</h2><p><strong>This document is an editor's draft that has no official standing.</strong></p><p>This specification was published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a>. It is not a W3C Standard nor is it on the W3C Standards Track. Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply. Learn more about <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>. </p><p>If you wish to make comments regarding this document, please send them to <a href="mailto:xproc-dev@w3.org">xproc-dev@w3.org</a>. (<a href="mailto:xproc-dev-request@w3.org?subject=subscribe">subscribe</a>, <a href="https://lists.w3.org/Archives/Public/xproc-dev/">archives</a>). </p><p>This document is derived from <a href="https://www.w3.org/TR/2010/REC-xproc-20100511/">XProc: An XML Pipeline Language</a> published by the W3C.</p></section></div><div class="lists-of-titles"><nav id="toc"><h2 id="TableOfContents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#validation-common"><bdi class="secno">2. </bdi>Common Options and Outputs</a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-nvdl"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">3. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with NVDL</span></a><a class="tocxref" href="#library"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Step library</span></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.validate-with-nvdl"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with NVDL</span></a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-relax-ng"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.2. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with RELAX NG</span></a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-schematron"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.3. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with Schematron</span></a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-xml-schema"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.4. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with XML Schema</span></a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-json-schema"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.5. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with JSON schema</span></a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-dtd"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.6. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with DTD</span></a></li></ul></li><li class="delete_version" style="display: none;"><a class="tocxref" href="#c.validate-with-relax-ng"><bdi class="secno">4. </bdi>Validate with RELAX NG</a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-relax-ng"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">4. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with RELAX NG</span></a></li><li class="delete_version" style="display: none;"><a class="tocxref" href="#c.validate-with-schematron"><bdi class="secno">5. </bdi>Validate with Schematron</a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-schematron"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">5. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with Schematron</span></a></li><li class="delete_version" style="display: none;"><a class="tocxref" href="#c.validate-with-xml-schema"><bdi class="secno">6. </bdi>Validate with XML Schema</a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-xml-schema"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">6. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with XML Schema</span></a></li><li class="delete_version" style="display: none;"><a class="tocxref" href="#c.validate-with-json-schema"><bdi class="secno">7. </bdi>Validate with JSON schema</a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-json-schema"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">7. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with JSON schema</span></a></li><li class="delete_version" style="display: none;"><a class="tocxref" href="#c.validate-with-dtd"><bdi class="secno">8. </bdi>Validate with a DTD</a></li><li class="tocline"><a class="tocxref" href="#c.validate-with-dtd"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">8. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with a DTD</span></a></li><li class="tocline"><a class="tocxref" href="#errors"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">9</span><span class="deltaxml-new" style="background:#90EE90">4</span>. </bdi>Step Errors</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">A. </bdi>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#implementation-defined"><bdi class="secno">A.1. </bdi>Implementation-defined features</a></li><li class="delete_version" style="display: none;"><a class="tocxref" href="#implementation-dependent"><bdi class="secno">A.2. </bdi>Implementation-dependent features</a></li><li class="tocline"><a class="tocxref" href="#implementation-dependent"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">A.2. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Implementation-dependent features</span></a></li></ul></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a></li><li class="tocline"><a class="tocxref" href="#glossary"><bdi class="secno">C. </bdi>Glossary</a></li><li class="tocline"><a class="tocxref" href="#ancillary-files"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">D. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Ancillary files</span></a><a class="tocxref" href="#changelog"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">D. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Change log</span></a></li><li class="add_version" style="display: none;"><a class="tocxref" href="#ancillary-files"><bdi class="secno">E. </bdi>Ancillary files</a></li><li class="tocline"><a class="tocxref" href="#ancillary-files"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">E. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Ancillary files</span></a></li></ol></nav></div><article class="specification"><section class="section" id="introduction"><div class="section-titlepage"><h2><bdi class="secno">1. </bdi>Introduction<a aria-label="§" class="self-link" href="#introduction"></a></h2></div><div class="content"><p><span style="display: none;" class="delete_version">This specification describes the <code class="code">p:validate-with-relax-ng</code>, <code class="code">p:validate-with-schematron</code>, <code class="code">p:validate-with-xml-schema</code>, <code class="code">p:validate-with-nvdl</code>, and <code class="code">p:validate-with-json-schema</code> steps. Each is independently optional. A machine-readable description of these steps may be found in <a href="steps.xpl">steps.xpl</a>. </span><span style="display: none;" class="add_version">This specification describes the <code class="code">p:validate-with-relax-ng</code>, <code class="code">p:validate-with-schematron</code>, <code class="code">p:validate-with-xml-schema</code>, <code class="code">p:validate-with-nvdl</code>, <code class="code">p:validate-with-json-schema</code>, and <code class="code">p:validate-with-dtd</code> steps. Each is independently optional. A machine-readable description of these steps may be found in <a href="steps.xpl">steps.xpl</a>. </span><span class="modify_version">This specification describes the <code class="code">p:validate-with-relax-ng</code>, <code class="code">p:validate-with-schematron</code>, <code class="code">p:validate-with-xml-schema</code>, <code class="code">p:validate-with-nvdl</code>, <span class="deltaxml-old" style="background:#FF5555">and </span><code class="code">p:validate-with-json-schema</code><span class="deltaxml-new" style="background:#90EE90">, and</span> <code class="code"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-dtd</span></code><span class="deltaxml-new" style="background:#90EE90"> </span>steps. Each is independently optional. A machine-readable description of these steps may be found in <a href="steps.xpl">steps.xpl</a>. </span></p><p>Familiarity with the general nature of [<a href="#xproc30"><span class="abbrev">XProc 3.0</span></a>] steps is assumed; for background details, see [<a href="#xproc30-steps"><span class="abbrev">XProc 3.0 Steps</span></a>].</p><p>As described in <cite><a href="../xproc/#psvi-support">PSVIs in XProc</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>, steps may not produce PSVI output unless that behavior is explicitly described. In this specification, the steps that may produce PSVI output are <a href="#c.validate-with-nvdl"><code class="tag-element">p:validate-with-nvdl</code></a>, <a href="#c.validate-with-schematron"><code class="tag-element">p:validate-with-schematron</code></a> and <a href="#c.validate-with-xml-schema"><code class="tag-element">p:validate-with-xml-schema</code></a>.</p></div></section><section id="validation-common" class="section"><div class="section-titlepage"><h2><bdi class="secno">2. </bdi>Common Options and Outputs<a aria-label="§" class="self-link" href="#validation-common"></a></h2></div><div class="content"><p>All steps in this specification provide a boolean option <a id="opt.inline.assert-valid-1"></a><code class="option">assert-valid</code>. If any of the validated documents is found to be invalid according to the respective schema, and possibly other parameters that influence determination of validity, a dynamic error is raised.</p><div id="note-assert-valid" class="note admonition"><h3>Note</h3><div class="admonition-body"><p>Historically, the validation steps (apart from <a href="#c.validate-with-schematron"><code class="tag-element">p:validate-with-schematron</code></a>) could only report errors by setting <a id="opt.inline.assert-valid-2"></a><code class="option">assert-valid</code> to <code class="literal">true</code> and catching the errors. A <code class="tag-element">c:errors</code> document on the <a id="port.inline.error-1"></a><code class="port">error</code> port of the corresponding <code class="tag-element">p:catch</code> recovery pipeline had to be sent to an output, either verbatim or after postprocessing. Now, if <a id="opt.inline.assert-valid-3"></a><code class="option">assert-valid</code> is <code class="literal">false</code>, an XVRL document will be available on the <a id="port.inline.report-1"></a><code class="port">report</code> port of the validation step. It uses the XVRL severity vocabulary to indicate whether the validation failed, and to which degree. This allows more nuance in reporting errors. Previously, <code class="literal">assert-valid="true"</code> on <a href="#c.validate-with-schematron"><code class="tag-element">p:validate-with-schematron</code></a> would always throw an error even if the reported findings were only intended as less severe, for example if the schema author used <code class="literal">info</code> or <code class="literal">warning</code> in <code class="code">sch:report/@role</code>.</p></div></div><p>If no such error is raised, each step generates at least one validation report document on its <a id="port.inline.report-2"></a><code class="port">report</code> port. Unless another format is requested, the mandatory report document for all steps except <a href="#c.validate-with-schematron"><code class="tag-element">p:validate-with-schematron</code></a><span class="rfc2119" id="validation-common.4.3">should</span> be an [<a href="#xvrl"><span class="abbrev">XVRL</span></a>] document. A report format may be requested by the <a id="opt.inline.report-format-1"></a><code class="option">report-format</code> option. <span id="impl-1">The supported values for the <a id="opt.inline.report-format-2"></a><code class="option">report-format</code> option are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>. A processor <span class="rfc2119" id="validation-common.4.6.3">should</span> at least support the value “<code class="literal">xvrl</code>” for the XML validation steps and “<code class="literal">svrl</code>” for <a href="#c.validate-with-schematron"><code class="tag-element">p:validate-with-schematron</code></a>.</span></p><p><a id="err.inline.C0117&#34;"></a>It is a <em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em> (<a href="#err.C0117"><code class="errqname">err:XC0117</code></a>) if a <a id="opt.inline.report-format-3"></a><code class="option">report-format</code> option was specified that the processor does not support.</p><p>If a step performs multiple validations on a single document (for example, embedded Schematron validations in a Relax NG schema), all individual XVRL reports need to be consolidated into a single XVRL report by the step.</p><p>Each of the validation steps has a <a id="opt.inline.parameters-1"></a><code class="option">parameters</code> option. <span id="impl-2">The parameters supported by the validation steps and their semantics are <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>, and they can be different for each validation step.</span> A special key in the <code class="literal">c</code> namespace, <code class="uri">http://www.w3.org/ns/xproc-step</code>, called <code class="literal">c:compile</code>, can hold a map itself that controls schema compilation. Schema compilation is, for example, the process of converting a Schematron schema into an XSLT stylesheet. The <code class="literal">c:compile</code> map will be used as parameters for the compilation process.</p><p>Map entries in the <code class="literal">xvrl</code> namespace, <code class="uri">http://www.xproc.org/ns/xvrl</code> will be passed as parameters to the XVRL generation process. XProc implementations that implement any of the XML validation steps <span class="rfc2119" id="validation-common.8.3">should</span> support the basic parameters that are defined in the [<a href="#xvrl"><span class="abbrev">XVRL</span></a>] specification, <code class="literal">xvrl:default-severity</code>, <code class="literal">xvrl:language</code>, <code class="literal">xvrl:map-to-severity</code>, and <code class="literal">xvrl:xpath-notation</code>.</p></div></section><section id="c.validate-with-nvdl" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">3. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with NVDL</span><a aria-label="§" class="self-link" href="#c.validate-with-nvdl"></a></h2></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-nvdl</span></code><span class="deltaxml-old" style="background:#FF5555"> step applies [</span><a href="#iso19757-4"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">NVDL</span></span></a><span class="deltaxml-old" style="background:#FF5555">] validation to the </span><a id="port.inline.source-1"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><div class="declare-step"><p><span class="deltaxml-old" style="background:#FF5555">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Input port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th><th class="binding"><span class="deltaxml-old" style="background:#FF5555">Default binding</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-2"><span class="deltaxml-old" style="background:#FF5555">source</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html </span></td><td></td></tr><tr><td><a href="#port.inline.nvdl-1"><span class="deltaxml-old" style="background:#FF5555">nvdl</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml </span></td><td></td></tr><tr><td><a href="#port.inline.schemas-1"><span class="deltaxml-old" style="background:#FF5555">schemas</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">text xml </span></td><td><span class="deltaxml-old" style="background:#FF5555">p:empty</span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Output port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th><th class="binding"><span class="deltaxml-old" style="background:#FF5555">Default binding</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-1"><span class="deltaxml-old" style="background:#FF5555">result</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html </span></td><td></td></tr><tr><td><a href="#port.inline.report-3"><span class="deltaxml-old" style="background:#FF5555">report</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml json </span></td><td></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Option name</span></th><th><span class="deltaxml-old" style="background:#FF5555">Type</span></th><th><span class="deltaxml-old" style="background:#FF5555">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-4"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555">true()</span></td></tr><tr><td><a href="#opt.inline.parameters-2"><span class="deltaxml-old" style="background:#FF5555">parameters</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">report-format</span></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string</span></td><td><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></td></tr></tbody></table><details><summary><span class="deltaxml-old" style="background:#FF5555">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Error code</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0053&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0053</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the assert-valid option on p:validate-with-nvdl is true and the input document is not valid.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0154&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0154</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the document supplied on nvdl port is not a valid NVDL document.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-nvdl</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">nvdl</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schemas</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code><span class="deltaxml-old" style="background:#FF5555">          </span><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:empty/&gt;</span></code><span class="deltaxml-old" style="background:#FF5555">     </span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">report-format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="port.inline.source-2"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> document is validated using the namespace dispatching rules contained in the </span><a id="port.inline.nvdl-1"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">nvdl</span></code><span class="deltaxml-old" style="background:#FF5555"> document. </span><a id="err.inline.C0154&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0154"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0154</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the document supplied on </span><a id="port.inline.nvdl-2"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">nvdl</span></code><span class="deltaxml-old" style="background:#FF5555"> port is not a valid NVDL document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The dispatching rules may contain URI references that point to the actual schemas to be used. As long as these schemas are accessible, it is not necessary to pass anything on the schemas port. However, if one or more schemas are provided on the </span><a id="port.inline.schemas-1"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schemas</span></code><span class="deltaxml-old" style="background:#FF5555"> port, then these schemas should be used in validation. </span></p><p><a id="err.inline.C0053&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0053"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0053</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><a id="opt.inline.assert-valid-4"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><span class="deltaxml-old" style="background:#FF5555"> option on </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-nvdl</span></code><span class="deltaxml-old" style="background:#FF5555"> is </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555"> and the input document is not valid.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The output from this step is a copy of the input. The output of this step </span><span class="rfc2119" id="c.validate-with-nvdl.7.1"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> include PSVI annotations.</span></p><div id="ednote-nvdl" class="note editorial admonition"><h3><span class="deltaxml-old" style="background:#FF5555">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-old" style="background:#FF5555">Should the step also provide the </span><a id="opt.inline.dtd-attribute-values-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></code><span class="deltaxml-old" style="background:#FF5555"> and </span><a id="opt.inline.dtd-id-idref-warnings-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></code><span class="deltaxml-old" style="background:#FF5555"> options for Relax NG validations? Is there a way to instruct </span><a href="https://github.com/relaxng/jing-trang"><span class="deltaxml-old" style="background:#FF5555">Jing</span></a><span class="deltaxml-old" style="background:#FF5555"> to use these options, maybe in NVDL extension attributes? Probably not in the foreseeable future.</span></p></div></div><section id="c.validate-with-nvdl.9" class="simplesect"><div class="section-titlepage"><h3><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">All document properties on the </span><a id="port.inline.source-3"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port are preserved on the </span><a id="port.inline.result-1"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> port. No document properties on the </span><a id="port.inline.schemas-2"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schemas</span></code><span class="deltaxml-old" style="background:#FF5555"> and </span><a id="port.inline.nvdl-3"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">nvdl</span></code><span class="deltaxml-old" style="background:#FF5555"> ports are preserved. No document properties are preserved on the </span><a id="port.inline.report-3"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">report</span></code><span class="deltaxml-old" style="background:#FF5555"> port.</span></p></div></section></div></section><section id="c.validate-with-relax-ng" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">4. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with RELAX NG</span><a aria-label="§" class="self-link" href="#c.validate-with-relax-ng"></a></h2></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></code><span class="deltaxml-old" style="background:#FF5555"> step applies [</span><a href="#iso19757-2"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG</span></span></a><span class="deltaxml-old" style="background:#FF5555">] validation to the </span><a id="port.inline.source-4"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><div class="declare-step"><p><span class="deltaxml-old" style="background:#FF5555">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Input port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-5"><span class="deltaxml-old" style="background:#FF5555">source</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html </span></td></tr><tr><td><a href="#port.inline.schema-1"><span class="deltaxml-old" style="background:#FF5555">schema</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">text xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Output port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-2"><span class="deltaxml-old" style="background:#FF5555">result</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html </span></td></tr><tr><td><a href="#port.inline.report-4"><span class="deltaxml-old" style="background:#FF5555">report</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Option name</span></th><th><span class="deltaxml-old" style="background:#FF5555">Type</span></th><th><span class="deltaxml-old" style="background:#FF5555">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-5"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555">true()</span></td></tr><tr><td><a href="#opt.inline.dtd-attribute-values-2"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555">false()</span></td></tr><tr><td><a href="#opt.inline.dtd-id-idref-warnings-2"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555">false()</span></td></tr><tr><td><a href="#opt.inline.parameters-2"><span class="deltaxml-old" style="background:#FF5555">parameters</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">report-format</span></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string</span></td><td><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></td></tr></tbody></table><details><summary><span class="deltaxml-old" style="background:#FF5555">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Error code</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0153&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0153</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the document supplied on schema port cannot be interpreted as an RELAX NG Grammar. </span></td></tr><tr><td class="errcode"><a href="#err.inline.C0155&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0155</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the assert-valid option on p:validate-with-relax-ng is true and the input document is not valid.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Implementation</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-3"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">Support for is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">report-format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-old" style="background:#FF5555">The values of the </span><a id="opt.inline.dtd-attribute-values-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></code><span class="deltaxml-old" style="background:#FF5555"> and </span><a id="opt.inline.dtd-id-idref-warnings-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></code><span class="deltaxml-old" style="background:#FF5555"> options </span><span class="rfc2119" id="c.validate-with-relax-ng.4.3"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be booleans.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><a id="port.inline.schema-1"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> document has an XML media type, then it </span><span class="rfc2119" id="c.validate-with-relax-ng.5.2"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be interpreted as a RELAX NG Grammar. If the </span><a id="port.inline.schema-2"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> document has a text media type, then it </span><span class="rfc2119" id="c.validate-with-relax-ng.5.4"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be interpreted as a [</span><a href="#relaxng-compact-syntax"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG Compact Syntax</span></span></a><span class="deltaxml-old" style="background:#FF5555">] document for validation. </span><a id="err.inline.C0153&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0153"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0153</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the document supplied on </span><a id="port.inline.schema-3"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port cannot be interpreted as an RELAX NG Grammar. </span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><a id="opt.inline.dtd-attribute-values-3"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-attribute-values</span></code><span class="deltaxml-old" style="background:#FF5555"> option is </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555">, then the attribute value defaulting conventions of [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-old" style="background:#FF5555">] are also applied.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><a id="opt.inline.dtd-id-idref-warnings-3"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">dtd-id-idref-warnings</span></code><span class="deltaxml-old" style="background:#FF5555"> option is </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555">, then the validator </span><span class="rfc2119" id="c.validate-with-relax-ng.7.3"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> treat a schema that is incompatible with the ID/IDREF/IDREFs feature of [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-old" style="background:#FF5555">] as if the document was invalid. </span></p><p><a id="err.inline.C0155&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0155"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0155</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><a id="opt.inline.assert-valid-5"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><span class="deltaxml-old" style="background:#FF5555"> option on </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-relax-ng</span></code><span class="deltaxml-old" style="background:#FF5555"> is </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555"> and the input document is not valid.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The output from this step is a copy of the input, possibly augmented by application of the [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. The output of this step </span><span class="rfc2119" id="c.validate-with-relax-ng.9.2"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> include PSVI annotations.</span></p><p><span id="impl-3"><span class="deltaxml-old" style="background:#FF5555">Support for [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-old" style="background:#FF5555">] is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></span></p><section id="c.validate-with-relax-ng.11" class="simplesect"><div class="section-titlepage"><h3><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">All document properties on the </span><a id="port.inline.source-5"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port are preserved on the </span><a id="port.inline.result-2"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> port. No document properties on the </span><a id="port.inline.schema-4"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port are preserved. No document properties are preserved on the </span><a id="port.inline.report-4"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">report</span></code><span class="deltaxml-old" style="background:#FF5555"> port.</span></p></div></section></div></section><section id="c.validate-with-schematron" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">5. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with Schematron</span><a aria-label="§" class="self-link" href="#c.validate-with-schematron"></a></h2></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-schematron</span></code><span class="deltaxml-old" style="background:#FF5555"> step applies [</span><a href="#iso19757-3"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Schematron</span></span></a><span class="deltaxml-old" style="background:#FF5555">] processing to the </span><a id="port.inline.source-6"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> document.</span></p><div class="declare-step"><p><span class="deltaxml-old" style="background:#FF5555">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Input port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-7"><span class="deltaxml-old" style="background:#FF5555">source</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html </span></td></tr><tr><td><a href="#port.inline.schema-5"><span class="deltaxml-old" style="background:#FF5555">schema</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Output port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-3"><span class="deltaxml-old" style="background:#FF5555">result</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html </span></td></tr><tr><td><a href="#port.inline.report-5"><span class="deltaxml-old" style="background:#FF5555">report</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Option name</span></th><th><span class="deltaxml-old" style="background:#FF5555">Type</span></th><th><span class="deltaxml-old" style="background:#FF5555">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-6"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555">true()</span></td></tr><tr><td><a href="#opt.inline.parameters-2"><span class="deltaxml-old" style="background:#FF5555">parameters</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr><tr><td><a href="#opt.inline.phase-1"><span class="deltaxml-old" style="background:#FF5555">phase</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string</span></td><td><span class="deltaxml-old" style="background:#FF5555">'#DEFAULT'</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">report-format</span></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string</span></td><td><span class="deltaxml-old" style="background:#FF5555">'svrl'</span></td></tr></tbody></table><details><summary><span class="deltaxml-old" style="background:#FF5555">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Error code</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0054&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0054</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the assert-valid option is true and any Schematron assertions fail.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0151&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0151</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the document supplied on schema port is not a valid Schematron document.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Implementation</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-4"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">How the Schematron implementation is selected is implementation-defined.</span></td></tr><tr><td><a href="#impl-5"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">The list of supported Schematron implementations and their associated values is implementation-defined.</span></td></tr><tr><td><a href="#impl-6"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">Which parameters the c:compile map supports for a given Schematron implementation is implementation-defined.</span></td></tr><tr><td><a href="#impl-7"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">Which parameters this conversion from native reporting format to XVRL supports is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-schematron</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">phase</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'#DEFAULT'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">   </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">report-format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'svrl'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="err.inline.C0151&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0151"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0151</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the document supplied on </span><a id="port.inline.schema-5"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port is not a valid Schematron document.</span></p><p><a id="err.inline.C0054&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0054"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0054</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><a id="opt.inline.assert-valid-6"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><span class="deltaxml-old" style="background:#FF5555"> option is </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555"> and any Schematron assertions fail.</span></p><div id="note-assert-valid_schematron" class="note admonition"><h3><span class="deltaxml-old" style="background:#FF5555">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-old" style="background:#FF5555">A Schematron validation with </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">assert-valid="true"</span></code><span class="deltaxml-old" style="background:#FF5555"> will fail if any validation message is produced by </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">sch:assert</span></code><span class="deltaxml-old" style="background:#FF5555"> or </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">sch:report</span></code><span class="deltaxml-old" style="background:#FF5555">, even if the severity level of the failed assertion or the successful report is below a certain threshold, for example if there is only an </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">info</span></code><span class="deltaxml-old" style="background:#FF5555"> message. (The severity is conventionally conveyed by the </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">@role</span></code><span class="deltaxml-old" style="background:#FF5555"> attribute on </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">sch:assert</span></code><span class="deltaxml-old" style="background:#FF5555"> or </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">sch:report</span></code><span class="deltaxml-old" style="background:#FF5555">.) </span></p></div></div><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><a id="opt.inline.phase-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">phase</span></code><span class="deltaxml-old" style="background:#FF5555"> option identifies the Schematron validation phase with which validation begins.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="opt.inline.parameters-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><span class="deltaxml-old" style="background:#FF5555"> option provides name/value pairs which correspond to Schematron external variables, to parameters that influence code generation, or to parameters that influence SVRL to XVRL conversion.</span></p><p><span class="deltaxml-old" style="background:#FF5555">There are multiple Schematron implementations. </span><span id="impl-4"><span class="deltaxml-old" style="background:#FF5555">How the Schematron implementation is selected is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></span><span class="deltaxml-old" style="background:#FF5555"> A processor might select an implementation based on the schema’s </span><code class="code attribute"><span class="deltaxml-old" style="background:#FF5555">queryBinding</span></code><span class="deltaxml-old" style="background:#FF5555"> attribute and/or provide configuration options. In addition, the special parameter map entry </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">c:implementation</span></code><span class="deltaxml-old" style="background:#FF5555"> (value: QName) may be used to select a Schematron implementation that the processor supports. </span><span id="impl-5"><span class="deltaxml-old" style="background:#FF5555">The list of supported Schematron implementations and their associated values is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></span><span class="deltaxml-old" style="background:#FF5555"> If a requested implementation is not available, the processor may throw an error or select another implementation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="opt.inline.parameters-3"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><span class="deltaxml-old" style="background:#FF5555"> map may contain two special entries, </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">c:compile</span></code><span class="deltaxml-old" style="background:#FF5555"> and </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">c:xvrl</span></code><span class="deltaxml-old" style="background:#FF5555">, both are maps. If a code-generating implementation such as [</span><a href="#schematron-skeleton"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">Schematron Skeleton</span></span></a><span class="deltaxml-old" style="background:#FF5555">] is used, the entries of the </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">c:compile</span></code><span class="deltaxml-old" style="background:#FF5555"> map, for example </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">allow-foreign</span></code><span class="deltaxml-old" style="background:#FF5555">, will be passed to the code generator. </span><span id="impl-6"><span class="deltaxml-old" style="background:#FF5555">Which parameters the </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">c:compile</span></code><span class="deltaxml-old" style="background:#FF5555"> map supports for a given Schematron implementation is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">If the Schematron implementation produces SVRL by default, the SVRL to XVRL conversion can be influenced by the entries of the </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">c:xvrl</span></code><span class="deltaxml-old" style="background:#FF5555"> map. The same map, with potentially another set of allowed keys and values, can be used to influence XVRL generation from another reporting language. </span><span id="impl-7"><span class="deltaxml-old" style="background:#FF5555">Which parameters this conversion from native reporting format to XVRL supports is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">All other parameters of the </span><a id="opt.inline.parameters-4"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><span class="deltaxml-old" style="background:#FF5555"> option will be passed to the generated code if applicable, or to a hypothetical native Schematron validator that does without code generation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="port.inline.result-3"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> output from this step is a copy of the input.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The output of this step </span><span class="rfc2119" id="c.validate-with-schematron.14.1"><span class="deltaxml-old" style="background:#FF5555">may</span></span><span class="deltaxml-old" style="background:#FF5555"> include PSVI annotations.</span></p><section id="c.validate-with-schematron.15" class="simplesect"><div class="section-titlepage"><h3><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">All document properties on the </span><a id="port.inline.source-7"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port are preserved on the </span><a id="port.inline.result-4"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> port. No document properties on the </span><a id="port.inline.schema-6"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port are preserved. No document properties are preserved on the </span><a id="port.inline.report-5"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">report</span></code><span class="deltaxml-old" style="background:#FF5555"> port.</span></p></div></section></div></section><section id="c.validate-with-xml-schema" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">6. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with XML Schema</span><a aria-label="§" class="self-link" href="#c.validate-with-xml-schema"></a></h2></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></code><span class="deltaxml-old" style="background:#FF5555"> step applies [</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-old" style="background:#FF5555">] validity assessment to the </span><a id="port.inline.source-8"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> input.</span></p><div class="declare-step"><p><span class="deltaxml-old" style="background:#FF5555">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Input port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-9"><span class="deltaxml-old" style="background:#FF5555">source</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html </span></td></tr><tr><td><a href="#port.inline.schema-7"><span class="deltaxml-old" style="background:#FF5555">schema</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Output port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-5"><span class="deltaxml-old" style="background:#FF5555">result</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html </span></td></tr><tr><td><a href="#port.inline.report-6"><span class="deltaxml-old" style="background:#FF5555">report</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Option name</span></th><th><span class="deltaxml-old" style="background:#FF5555">Type</span></th><th><span class="deltaxml-old" style="background:#FF5555">Values</span></th><th><span class="deltaxml-old" style="background:#FF5555">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-7"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">true()</span></td></tr><tr><td><a href="#opt.inline.mode-1"><span class="deltaxml-old" style="background:#FF5555">mode</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string</span></td><td><span class="deltaxml-old" style="background:#FF5555">('strict','lax') </span></td><td><span class="deltaxml-old" style="background:#FF5555">'strict'</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">parameters</span></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">report-format</span></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string</span></td><td><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></td></tr><tr><td><a href="#opt.inline.try-namespaces-1"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">false()</span></td></tr><tr><td><a href="#opt.inline.use-location-hints-1"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">false()</span></td></tr><tr><td><a href="#opt.inline.version-1"><span class="deltaxml-old" style="background:#FF5555">version</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></td><td><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-old" style="background:#FF5555">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Error code</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0011&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0011</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the specified schema version is not available.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0055&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0055</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the implementation does not support the specified mode.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0152&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0152</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the document supplied on schema port is not a valid XML schema document.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0156&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0156</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the assert-valid option on p:validate-with-xml-schema is true and the input document is not valid.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Implementation</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-8"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined if the documents supplied on the schemas port are considered when resolving xs:include elements in the schema documents provided.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">false()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">mode</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'strict'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr values-attr"><span class="deltaxml-old" style="background:#FF5555">values</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value values-value"><span class="deltaxml-old" style="background:#FF5555">('strict','lax')</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-old" style="background:#FF5555">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-old" style="background:#FF5555">string</span></span><code class="comment"><span class="deltaxml-old" style="background:#FF5555"> --&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">                    </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">report-format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="err.inline.C0152&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0152"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0152</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the document supplied on </span><a id="port.inline.schema-7"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port is not a valid XML schema document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The values of the </span><a id="opt.inline.use-location-hints-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></code><span class="deltaxml-old" style="background:#FF5555">, </span><a id="opt.inline.try-namespaces-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></code><span class="deltaxml-old" style="background:#FF5555">, and </span><a id="opt.inline.assert-valid-7"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><span class="deltaxml-old" style="background:#FF5555"> options </span><span class="rfc2119" id="c.validate-with-xml-schema.5.4"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be boolean.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The value of the </span><a id="opt.inline.mode-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">mode</span></code><span class="deltaxml-old" style="background:#FF5555"> option </span><span class="rfc2119" id="c.validate-with-xml-schema.6.2"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be an NMTOKEN whose value is either “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">strict</span></code><span class="deltaxml-old" style="background:#FF5555">” or “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">lax</span></code><span class="deltaxml-old" style="background:#FF5555">”.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Validation is performed against the set of schemas represented by the documents on the </span><a id="port.inline.schema-8"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port. These schemas must be used in preference to any schema locations provided by schema location hints encountered during schema validation, that is, schema locations supplied for </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">xs:import</span></code><span class="deltaxml-old" style="background:#FF5555"> or </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">xsi:schema-location</span></code><span class="deltaxml-old" style="background:#FF5555">, or determined by schema-processor-defined namespace-based strategies, for the namespaces covered by the documents available on the schemas port.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">xs:include</span></code><span class="deltaxml-old" style="background:#FF5555"> elements occur within the supplied schema documents, they are treated like any other external documents (see [</span><a href="#xproc30"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XProc 3.0</span></span></a><span class="deltaxml-old" style="background:#FF5555">]). </span><span id="impl-8"><span class="deltaxml-old" style="background:#FF5555">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> if the documents supplied on the </span><a id="port.inline.schemas-3"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schemas</span></code><span class="deltaxml-old" style="background:#FF5555"> port are considered when resolving </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">xs:include</span></code><span class="deltaxml-old" style="background:#FF5555"> elements in the schema documents provided.</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="opt.inline.use-location-hints-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></code><span class="deltaxml-old" style="background:#FF5555"> and </span><a id="opt.inline.try-namespaces-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></code><span class="deltaxml-old" style="background:#FF5555"> options allow the pipeline author to control how the schema processor should attempt to locate schema documents necessary but not provided on the </span><a id="port.inline.schema-9"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port. Any schema documents provided on the </span><a id="port.inline.schema-10"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port </span><span class="rfc2119" id="c.validate-with-xml-schema.9.5"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used in preference to schema documents located by other means.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><a id="opt.inline.use-location-hints-3"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">use-location-hints</span></code><span class="deltaxml-old" style="background:#FF5555"> option is “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.10.3"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> make use of schema location hints to locate schema documents. If the option is “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></code><span class="deltaxml-old" style="background:#FF5555">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.10.5"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> ignore any such hints.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the </span><a id="opt.inline.try-namespaces-3"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">try-namespaces</span></code><span class="deltaxml-old" style="background:#FF5555"> option is “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.11.3"><span class="deltaxml-old" style="background:#FF5555">should</span></span><span class="deltaxml-old" style="background:#FF5555"> attempt to dereference the namespace URI to locate schema documents. If the option is “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></code><span class="deltaxml-old" style="background:#FF5555">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.11.5"><span class="deltaxml-old" style="background:#FF5555">should not</span></span><span class="deltaxml-old" style="background:#FF5555"> dereference namespace URIs.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="opt.inline.mode-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">mode</span></code><span class="deltaxml-old" style="background:#FF5555"> option allow the pipeline author to control how schema validation begins. The “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">strict</span></code><span class="deltaxml-old" style="background:#FF5555">” mode means that the document element must be declared and schema-valid, otherwise it will be treated as invalid. The “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">lax</span></code><span class="deltaxml-old" style="background:#FF5555">” mode means that the absence of a declaration for the document element does not itself count as an unsuccessful outcome of validation.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the step specifies a </span><a id="opt.inline.version-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">version</span></code><span class="deltaxml-old" style="background:#FF5555">, then that version of XML Schema </span><span class="rfc2119" id="c.validate-with-xml-schema.13.2"><span class="deltaxml-old" style="background:#FF5555">must</span></span><span class="deltaxml-old" style="background:#FF5555"> be used to process the validation. </span><a id="err.inline.C0011&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0011"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0011</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the specified schema version is not available. If the step does not specify a version, the implementation may use any version it has available and may use any means to determine what version to use, including, but not limited to, examining the version of the schema(s).</span></p><p><a id="err.inline.C0156&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0156"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0156</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><a id="opt.inline.assert-valid-8"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><span class="deltaxml-old" style="background:#FF5555"> option on </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></code><span class="deltaxml-old" style="background:#FF5555"> is </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555"> and the input document is not valid. If the </span><a id="opt.inline.assert-valid-9"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><span class="deltaxml-old" style="background:#FF5555"> option is </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></code><span class="deltaxml-old" style="background:#FF5555">, it is not an error for the document to be invalid. In this case, if the implementation does not support the PSVI, </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-xml-schema</span></code><span class="deltaxml-old" style="background:#FF5555"> is essentially just an “identity” step, but if the implementation </span><em><span class="deltaxml-old" style="background:#FF5555">does</span></em><span class="deltaxml-old" style="background:#FF5555"> support the PSVI, then the resulting document will have additional type information (at least for the subtrees that are valid).</span></p><p><span class="deltaxml-old" style="background:#FF5555">When XML Schema validation assessment is performed, the processor is invoked in the mode specified by the </span><a id="opt.inline.mode-3"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">mode</span></code><span class="deltaxml-old" style="background:#FF5555"> option. </span><a id="err.inline.C0055&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0055"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0055</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the implementation does not support the specified mode. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="port.inline.result-5"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> of the assessment is a document with the Post-Schema-Validation-Infoset (PSVI) ([</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-old" style="background:#FF5555">]) annotations, if the pipeline implementation supports such annotations. If not, the input document is reproduced with any defaulting of attributes and elements performed as specified by the XML Schema recommendation.</span></p><section id="c.validate-with-xml-schema.17" class="simplesect"><div class="section-titlepage"><h3><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">All document properties on the </span><a id="port.inline.source-9"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port are preserved on the </span><a id="port.inline.result-6"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> port. No document properties on the </span><a id="port.inline.schemas-4"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schemas</span></code><span class="deltaxml-old" style="background:#FF5555"> port are preserved.</span></p></div></section></div></section><section id="c.validate-with-json-schema" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">7. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with JSON schema</span><a aria-label="§" class="self-link" href="#c.validate-with-json-schema"></a></h2></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-json-schema</span></code><span class="deltaxml-old" style="background:#FF5555"> step applies a JSON schema validation (as defined in [</span><a href="#jsonschema2020-12"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">JSON schema</span></span></a><span class="deltaxml-old" style="background:#FF5555">] and other publications) to the </span><a id="port.inline.source-10"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> input.</span></p><div class="declare-step"><p><span class="deltaxml-old" style="background:#FF5555">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Input port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-11"><span class="deltaxml-old" style="background:#FF5555">source</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">json </span></td></tr><tr><td><a href="#port.inline.schema-11"><span class="deltaxml-old" style="background:#FF5555">schema</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Output port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-7"><span class="deltaxml-old" style="background:#FF5555">result</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">json </span></td></tr><tr><td><a href="#port.inline.report-6"><span class="deltaxml-old" style="background:#FF5555">report</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Option name</span></th><th><span class="deltaxml-old" style="background:#FF5555">Type</span></th><th><span class="deltaxml-old" style="background:#FF5555">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-10"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555">true()</span></td></tr><tr><td><a href="#opt.inline.default-version-1"><span class="deltaxml-old" style="background:#FF5555">default-version</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">parameters</span></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">report-format</span></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string</span></td><td><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></td></tr></tbody></table><details><summary><span class="deltaxml-old" style="background:#FF5555">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Error code</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0163&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0163</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the selected version is not supported.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0164&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0164</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the document supplied on schema port is not a valid JSON schema document in the selected version.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0165&#34;"><span class="deltaxml-old" style="background:#FF5555">err:C0165</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the assert-valid option on p:validate-with-json-schema is true and the input document is not valid.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Implementation</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-9"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">If the schema does not specify a version and option default-version is empty, the version used is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-json-schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">false</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">default-version</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">            </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">     </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">report-format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-old" style="background:#FF5555">The option </span><a id="opt.inline.default-version-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">default-version</span></code><span class="deltaxml-old" style="background:#FF5555"> can be used to control the schema's version in case it does not specify one itself. </span><span id="impl-9"><span class="deltaxml-old" style="background:#FF5555">If the schema does not specify a version and option </span><a id="opt.inline.default-version-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">default-version</span></code><span class="deltaxml-old" style="background:#FF5555"> is empty, the version used is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555">.</span></span></p><p><a id="err.inline.C0163&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0163"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0163</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the selected version is not supported.</span></p><p><a id="err.inline.C0164&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0164"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0164</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the document supplied on </span><a id="port.inline.schema-11"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schema</span></code><span class="deltaxml-old" style="background:#FF5555"> port is not a valid JSON schema document in the selected version.</span></p><p><a id="err.inline.C0165&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0165"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0165</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the </span><a id="opt.inline.assert-valid-10"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><span class="deltaxml-old" style="background:#FF5555"> option on </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-json-schema</span></code><span class="deltaxml-old" style="background:#FF5555"> is </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555"> and the input document is not valid.</span></p><section id="c.validate-with-json-schema.8" class="simplesect"><div class="section-titlepage"><h3><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">All document properties on the </span><a id="port.inline.source-11"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port are preserved on the </span><a id="port.inline.result-7"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> port. No document properties on the </span><a id="port.inline.schemas-5"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">schemas</span></code><span class="deltaxml-old" style="background:#FF5555"> are preserved. No document properties are preserved on the </span><a id="port.inline.report-6"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">report</span></code><span class="deltaxml-old" style="background:#FF5555"> port.</span></p></div></section><section id="c.validate-with-json-schema.9" class="simplesect"><div class="section-titlepage"><h3><span class="deltaxml-old" style="background:#FF5555">Errata, April 2024</span></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">Corrected an error in the sequence type for the </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">default-version</span></code><span class="deltaxml-old" style="background:#FF5555"> option to allow it to be optional.</span></p></div></section></div></section><section id="c.validate-with-dtd" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">8. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Validate with a DTD</span><a aria-label="§" class="self-link" href="#c.validate-with-dtd"></a></h2></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-dtd</span></code><span class="deltaxml-old" style="background:#FF5555"> step validates XML with a DTD.</span></p><div class="declare-step"><p><span class="deltaxml-old" style="background:#FF5555">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Input port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th><th class="binding"><span class="deltaxml-old" style="background:#FF5555">Default binding</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-12"><span class="deltaxml-old" style="background:#FF5555">source</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml html text </span></td><td></td></tr><tr><td><a href="#port.inline.doctype-1"><span class="deltaxml-old" style="background:#FF5555">doctype</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">text </span></td><td><span class="deltaxml-old" style="background:#FF5555">p:empty</span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Output port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th><th class="binding"><span class="deltaxml-old" style="background:#FF5555">Default binding</span></th></tr></thead><tbody><tr><td class="primary"><span class="deltaxml-old" style="background:#FF5555">result</span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml </span></td><td></td></tr><tr><td><a href="#port.inline.report-7"><span class="deltaxml-old" style="background:#FF5555">report</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">xml json </span></td><td></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Option name</span></th><th><span class="deltaxml-old" style="background:#FF5555">Type</span></th><th><span class="deltaxml-old" style="background:#FF5555">Default value</span></th></tr></thead><tbody><tr><td><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></td><td><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></td><td><span class="deltaxml-old" style="background:#FF5555">true()</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">report-format</span></td><td><span class="deltaxml-old" style="background:#FF5555">xs:string</span></td><td><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></td></tr><tr><td><span class="deltaxml-old" style="background:#FF5555">serialization</span></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-old" style="background:#FF5555">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:validate-with-dtd</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml html text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">doctype</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">text</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code><span class="deltaxml-old" style="background:#FF5555">          </span><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:empty/&gt;</span></code><span class="deltaxml-old" style="background:#FF5555">     </span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:input&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr primary-attr"><span class="deltaxml-old" style="background:#FF5555">primary</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value primary-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">report</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">xml json</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">report-format</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">'xvrl'</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">  </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">assert-valid</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr select-attr"><span class="deltaxml-old" style="background:#FF5555">select</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value select-value"><span class="deltaxml-old" style="background:#FF5555">true()</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">xs:boolean</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-old" style="background:#FF5555">DTD validation differs from the other XML validation technologies in that it is applied during parsing. It isn’t possible to validate an XML data model with a DTD. This step necessarily serializes the source document and then parses it back into a new data model. </span></p><p><span class="deltaxml-old" style="background:#FF5555">There are several possible approaches, with varying degrees of complexity. The general model is that the contents of the </span><a id="port.inline.doctype-1"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">doctype</span></code><span class="deltaxml-old" style="background:#FF5555"> port and the result of serializing the </span><a id="port.inline.source-12"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> are concatenated together. </span></p><div class="itemizedlist"><ul><li><p><span class="deltaxml-old" style="background:#FF5555">In the simple case, the </span><a id="port.inline.doctype-2"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">doctype</span></code><span class="deltaxml-old" style="background:#FF5555"> is empty and </span><a id="port.inline.source-13"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> document is simply serialized. In order to have any chance of being DTD-valid, the serialization properties must include at least a </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><span class="deltaxml-old" style="background:#FF5555"> property.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">If an internal subset is required, it is provided on the </span><a id="port.inline.doctype-3"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">doctype</span></code><span class="deltaxml-old" style="background:#FF5555"> port. In this case, the </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> document must be serialized </span><em><span class="deltaxml-old" style="background:#FF5555">without</span></em><span class="deltaxml-old" style="background:#FF5555"> a </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">doctype-system</span></code><span class="deltaxml-old" style="background:#FF5555"> property; both the internal and external declarations must appear on the </span><a id="port.inline.doctype-4"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">doctype</span></code><span class="deltaxml-old" style="background:#FF5555"> port.</span></p></li><li><p><span class="deltaxml-old" style="background:#FF5555">Finally, if a text document is provided on the </span><a id="port.inline.source-14"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port, it is simply concatenated with the </span><a id="port.inline.doctype-5"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">doctype</span></code><span class="deltaxml-old" style="background:#FF5555"> port.</span></p></li></ul></div><p><span class="deltaxml-old" style="background:#FF5555">The resulting text is parsed using a validating XML parser.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Any warning or error messages produced by the parser will appear on the </span><a id="port.inline.report-7"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">report</span></code><span class="deltaxml-old" style="background:#FF5555"> port. If validation succeeds, the validated document will appear on the result port.</span></p></div></section><section id="library" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Step library</span><a aria-label="§" class="self-link" href="#library"></a></h2></div><div class="content"><section id="c.validate-with-nvdl" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with NVDL</span><a aria-label="§" class="self-link" href="#c.validate-with-nvdl"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-nvdl</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies [</span><a href="#iso19757-4"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">NVDL</span></span></a><span class="deltaxml-new" style="background:#90EE90">] validation to the </span><a id="port.inline.source-1"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th><th class="binding"><span class="deltaxml-new" style="background:#90EE90">Default binding</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-2"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td><td></td></tr><tr><td><a href="#port.inline.nvdl-1"><span class="deltaxml-new" style="background:#90EE90">nvdl</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml </span></td><td></td></tr><tr><td><a href="#port.inline.schemas-1"><span class="deltaxml-new" style="background:#90EE90">schemas</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml </span></td><td><span class="deltaxml-new" style="background:#90EE90">p:empty</span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th><th class="binding"><span class="deltaxml-new" style="background:#90EE90">Default binding</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-1"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td><td></td></tr><tr><td><a href="#port.inline.report-3"><span class="deltaxml-new" style="background:#90EE90">report</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml json </span></td><td></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-4"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr><tr><td><a href="#opt.inline.parameters-2"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">report-format</span></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0053&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0053</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option on p:validate-with-nvdl is true and the input document is not valid.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0154&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0154</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document supplied on nvdl port is not a valid NVDL document.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-nvdl</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">nvdl</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schemas</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><br /><span class="deltaxml-new" style="background:#90EE90">          </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:empty/&gt;</span></code><br /><span class="deltaxml-new" style="background:#90EE90">     </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:input&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">report-format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="port.inline.source-2"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document is validated using the namespace dispatching rules contained in the </span><a id="port.inline.nvdl-1"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">nvdl</span></code><span class="deltaxml-new" style="background:#90EE90"> document. </span><a id="err.inline.C0154&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0154"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0154</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the document supplied on </span><a id="port.inline.nvdl-2"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">nvdl</span></code><span class="deltaxml-new" style="background:#90EE90"> port is not a valid NVDL document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The dispatching rules may contain URI references that point to the actual schemas to be used. As long as these schemas are accessible, it is not necessary to pass anything on the schemas port. However, if one or more schemas are provided on the </span><a id="port.inline.schemas-1"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schemas</span></code><span class="deltaxml-new" style="background:#90EE90"> port, then these schemas should be used in validation. </span></p><p><a id="err.inline.C0053&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0053"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0053</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a id="opt.inline.assert-valid-4"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-nvdl</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the input document is not valid.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output from this step is a copy of the input. The output of this step </span><span class="rfc2119" id="c.validate-with-nvdl.7.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> include PSVI annotations.</span></p><section id="c.validate-with-nvdl.8" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties on the </span><a id="port.inline.source-3"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port are preserved on the </span><a id="port.inline.result-1"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. No document properties are preserved on the </span><a id="port.inline.report-3"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">report</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p></div></section></div></section><section id="c.validate-with-relax-ng" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.2. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with RELAX NG</span><a aria-label="§" class="self-link" href="#c.validate-with-relax-ng"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies [</span><a href="#iso19757-2"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG</span></span></a><span class="deltaxml-new" style="background:#90EE90">] validation to the </span><a id="port.inline.source-4"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-5"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr><tr><td><a href="#port.inline.schema-1"><span class="deltaxml-new" style="background:#90EE90">schema</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">text xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-2"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr><tr><td><a href="#port.inline.report-4"><span class="deltaxml-new" style="background:#90EE90">report</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-5"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr><tr><td><a href="#opt.inline.dtd-attribute-values-1"><span class="deltaxml-new" style="background:#90EE90">dtd-attribute-values</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td></tr><tr><td><a href="#opt.inline.dtd-id-idref-warnings-1"><span class="deltaxml-new" style="background:#90EE90">dtd-id-idref-warnings</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td></tr><tr><td><a href="#opt.inline.parameters-2"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">report-format</span></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0153&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0153</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document supplied on schema port cannot be interpreted as an RELAX NG Grammar. </span></td></tr><tr><td class="errcode"><a href="#err.inline.C0155&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0155</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option on p:validate-with-relax-ng is true and the input document is not valid.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-3"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Support for is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">text xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">dtd-attribute-values</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">dtd-id-idref-warnings</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">report-format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">The values of the </span><a id="opt.inline.dtd-attribute-values-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-attribute-values</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><a id="opt.inline.dtd-id-idref-warnings-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-id-idref-warnings</span></code><span class="deltaxml-new" style="background:#90EE90"> options </span><span class="rfc2119" id="c.validate-with-relax-ng.4.3"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be booleans.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a id="port.inline.schema-1"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> document has an XML media type, then it </span><span class="rfc2119" id="c.validate-with-relax-ng.5.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be interpreted as a RELAX NG Grammar. If the </span><a id="port.inline.schema-2"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> document has a text media type, then it </span><span class="rfc2119" id="c.validate-with-relax-ng.5.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be interpreted as a [</span><a href="#relaxng-compact-syntax"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG Compact Syntax</span></span></a><span class="deltaxml-new" style="background:#90EE90">] document for validation. </span><a id="err.inline.C0153&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0153"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0153</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the document supplied on </span><a id="port.inline.schema-3"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port cannot be interpreted as an RELAX NG Grammar. </span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a id="opt.inline.dtd-attribute-values-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-attribute-values</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, then the attribute value defaulting conventions of [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-new" style="background:#90EE90">] are also applied.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a id="opt.inline.dtd-id-idref-warnings-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">dtd-id-idref-warnings</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, then the validator </span><span class="rfc2119" id="c.validate-with-relax-ng.7.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> treat a schema that is incompatible with the ID/IDREF/IDREFs feature of [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-new" style="background:#90EE90">] as if the document was invalid. </span></p><p><a id="err.inline.C0155&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0155"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0155</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a id="opt.inline.assert-valid-5"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-relax-ng</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the input document is not valid.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output from this step is a copy of the input, possibly augmented by application of the [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. The output of this step </span><span class="rfc2119" id="c.validate-with-relax-ng.9.2"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> include PSVI annotations.</span></p><p><span id="impl-3"><span class="deltaxml-new" style="background:#90EE90">Support for [</span><a href="#relaxng-dtd-compat"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">RELAX NG DTD Compatibility</span></span></a><span class="deltaxml-new" style="background:#90EE90">] is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span></p><section id="c.validate-with-relax-ng.11" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties on the </span><a id="port.inline.source-5"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port are preserved on the </span><a id="port.inline.result-2"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. No document properties are preserved on the </span><a id="port.inline.report-4"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">report</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p></div></section></div></section><section id="c.validate-with-schematron" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.3. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with Schematron</span><a aria-label="§" class="self-link" href="#c.validate-with-schematron"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-schematron</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies [</span><a href="#iso19757-3"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Schematron</span></span></a><span class="deltaxml-new" style="background:#90EE90">] processing to the </span><a id="port.inline.source-6"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> document.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-7"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr><tr><td><a href="#port.inline.schema-4"><span class="deltaxml-new" style="background:#90EE90">schema</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-3"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr><tr><td><a href="#port.inline.report-5"><span class="deltaxml-new" style="background:#90EE90">report</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-6"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr><tr><td><a href="#opt.inline.parameters-2"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.phase-1"><span class="deltaxml-new" style="background:#90EE90">phase</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'#DEFAULT'</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">report-format</span></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'svrl'</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0054&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0054</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option is true and any Schematron assertions fail.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0151&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0151</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document supplied on schema port is not a valid Schematron document.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-4"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">How the Schematron implementation is selected is implementation-defined.</span></td></tr><tr><td><a href="#impl-5"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">The list of supported Schematron implementations and their associated values is implementation-defined.</span></td></tr><tr><td><a href="#impl-6"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Which parameters the c:compile map supports for a given Schematron implementation is implementation-defined.</span></td></tr><tr><td><a href="#impl-7"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Which parameters this conversion from native reporting format to XVRL supports is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-schematron</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">phase</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'#DEFAULT'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">   </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">report-format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'svrl'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="err.inline.C0151&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0151"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0151</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the document supplied on </span><a id="port.inline.schema-4"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port is not a valid Schematron document.</span></p><p><a id="err.inline.C0054&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0054"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0054</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a id="opt.inline.assert-valid-6"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and any Schematron assertions fail.</span></p><div id="note-assert-valid_schematron" class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-new" style="background:#90EE90">A Schematron validation with </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">assert-valid="true"</span></code><span class="deltaxml-new" style="background:#90EE90"> will fail if any validation message is produced by </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">sch:assert</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">sch:report</span></code><span class="deltaxml-new" style="background:#90EE90">, even if the severity level of the failed assertion or the successful report is below a certain threshold, for example if there is only an </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">info</span></code><span class="deltaxml-new" style="background:#90EE90"> message. (The severity is conventionally conveyed by the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">@role</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">sch:assert</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">sch:report</span></code><span class="deltaxml-new" style="background:#90EE90">.) </span></p></div></div><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><a id="opt.inline.phase-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">phase</span></code><span class="deltaxml-new" style="background:#90EE90"> option identifies the Schematron validation phase with which validation begins.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="opt.inline.parameters-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> option provides name/value pairs which correspond to Schematron external variables, to parameters that influence code generation, or to parameters that influence SVRL to XVRL conversion.</span></p><p><span class="deltaxml-new" style="background:#90EE90">There are multiple Schematron implementations. </span><span id="impl-4"><span class="deltaxml-new" style="background:#90EE90">How the Schematron implementation is selected is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span><span class="deltaxml-new" style="background:#90EE90"> A processor might select an implementation based on the schema’s </span><code class="code attribute"><span class="deltaxml-new" style="background:#90EE90">queryBinding</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute and/or provide configuration options. In addition, the special parameter map entry </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c:implementation</span></code><span class="deltaxml-new" style="background:#90EE90"> (value: QName) may be used to select a Schematron implementation that the processor supports. </span><span id="impl-5"><span class="deltaxml-new" style="background:#90EE90">The list of supported Schematron implementations and their associated values is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span><span class="deltaxml-new" style="background:#90EE90"> If a requested implementation is not available, the processor may throw an error or select another implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="opt.inline.parameters-3"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> map may contain two special entries, </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c:compile</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c:xvrl</span></code><span class="deltaxml-new" style="background:#90EE90">, both are maps. If a code-generating implementation such as [</span><a href="#schematron-skeleton"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">Schematron Skeleton</span></span></a><span class="deltaxml-new" style="background:#90EE90">] is used, the entries of the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c:compile</span></code><span class="deltaxml-new" style="background:#90EE90"> map, for example </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">allow-foreign</span></code><span class="deltaxml-new" style="background:#90EE90">, will be passed to the code generator. </span><span id="impl-6"><span class="deltaxml-new" style="background:#90EE90">Which parameters the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c:compile</span></code><span class="deltaxml-new" style="background:#90EE90"> map supports for a given Schematron implementation is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">If the Schematron implementation produces SVRL by default, the SVRL to XVRL conversion can be influenced by the entries of the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">c:xvrl</span></code><span class="deltaxml-new" style="background:#90EE90"> map. The same map, with potentially another set of allowed keys and values, can be used to influence XVRL generation from another reporting language. </span><span id="impl-7"><span class="deltaxml-new" style="background:#90EE90">Which parameters this conversion from native reporting format to XVRL supports is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">All other parameters of the </span><a id="opt.inline.parameters-4"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> option will be passed to the generated code if applicable, or to a hypothetical native Schematron validator that does without code generation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="port.inline.result-3"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> output from this step is a copy of the input.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output of this step </span><span class="rfc2119" id="c.validate-with-schematron.14.1"><span class="deltaxml-new" style="background:#90EE90">may</span></span><span class="deltaxml-new" style="background:#90EE90"> include PSVI annotations.</span></p><section id="c.validate-with-schematron.15" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties on the </span><a id="port.inline.source-7"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port are preserved on the </span><a id="port.inline.result-4"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. No document properties are preserved on the </span><a id="port.inline.report-5"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">report</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p></div></section></div></section><section id="c.validate-with-xml-schema" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.4. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with XML Schema</span><a aria-label="§" class="self-link" href="#c.validate-with-xml-schema"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies [</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-new" style="background:#90EE90">] validity assessment to the </span><a id="port.inline.source-8"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> input.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-9"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr><tr><td><a href="#port.inline.schema-5"><span class="deltaxml-new" style="background:#90EE90">schema</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-5"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr><tr><td><a href="#port.inline.report-6"><span class="deltaxml-new" style="background:#90EE90">report</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Values</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-7"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr><tr><td><a href="#opt.inline.mode-1"><span class="deltaxml-new" style="background:#90EE90">mode</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">('strict','lax') </span></td><td><span class="deltaxml-new" style="background:#90EE90">'strict'</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">parameters</span></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">report-format</span></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></td></tr><tr><td><a href="#opt.inline.try-namespaces-1"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td></tr><tr><td><a href="#opt.inline.use-location-hints-1"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">false()</span></td></tr><tr><td><a href="#opt.inline.version-1"><span class="deltaxml-new" style="background:#90EE90">version</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0011&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0011</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the specified schema version is not available.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0055&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0055</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the implementation does not support the specified mode.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0152&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0152</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document supplied on schema port is not a valid XML schema document.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0156&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0156</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option on p:validate-with-xml-schema is true and the input document is not valid.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-8"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined if the documents supplied on the schemas port are considered when resolving xs:include elements in the schema documents provided.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">false()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'strict'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr values-attr"><span class="deltaxml-new" style="background:#90EE90">values</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value values-value"><span class="deltaxml-new" style="background:#90EE90">('strict','lax')</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code><code class="comment"><span class="deltaxml-new" style="background:#90EE90">&lt;!-- </span></code><span class="opt-type"><span class="deltaxml-new" style="background:#90EE90">string</span></span><code class="comment"><span class="deltaxml-new" style="background:#90EE90"> --&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">                    </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">report-format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><a id="err.inline.C0152&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0152"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0152</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the document supplied on </span><a id="port.inline.schema-5"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port is not a valid XML schema document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The values of the </span><a id="opt.inline.use-location-hints-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><a id="opt.inline.try-namespaces-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><a id="opt.inline.assert-valid-7"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> options </span><span class="rfc2119" id="c.validate-with-xml-schema.5.4"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be boolean.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><a id="opt.inline.mode-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><span class="deltaxml-new" style="background:#90EE90"> option </span><span class="rfc2119" id="c.validate-with-xml-schema.6.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be an NMTOKEN whose value is either “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">strict</span></code><span class="deltaxml-new" style="background:#90EE90">” or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">lax</span></code><span class="deltaxml-new" style="background:#90EE90">”.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Validation is performed against the set of schemas represented by the documents on the </span><a id="port.inline.schema-6"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port. These schemas must be used in preference to any schema locations provided by schema location hints encountered during schema validation, that is, schema locations supplied for </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:import</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xsi:schema-location</span></code><span class="deltaxml-new" style="background:#90EE90">, or determined by schema-processor-defined namespace-based strategies, for the namespaces covered by the documents available on the schemas port.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:include</span></code><span class="deltaxml-new" style="background:#90EE90"> elements occur within the supplied schema documents, they are treated like any other external documents (see [</span><a href="#xproc30"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XProc 3.0</span></span></a><span class="deltaxml-new" style="background:#90EE90">]). </span><span id="impl-8"><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> if the documents supplied on the </span><a id="port.inline.schemas-2"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schemas</span></code><span class="deltaxml-new" style="background:#90EE90"> port are considered when resolving </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">xs:include</span></code><span class="deltaxml-new" style="background:#90EE90"> elements in the schema documents provided.</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="opt.inline.use-location-hints-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><a id="opt.inline.try-namespaces-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><span class="deltaxml-new" style="background:#90EE90"> options allow the pipeline author to control how the schema processor should attempt to locate schema documents necessary but not provided on the </span><a id="port.inline.schema-7"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port. Any schema documents provided on the </span><a id="port.inline.schema-8"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port </span><span class="rfc2119" id="c.validate-with-xml-schema.9.5"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used in preference to schema documents located by other means.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a id="opt.inline.use-location-hints-3"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">use-location-hints</span></code><span class="deltaxml-new" style="background:#90EE90"> option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.10.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> make use of schema location hints to locate schema documents. If the option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.10.5"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> ignore any such hints.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a id="opt.inline.try-namespaces-3"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">try-namespaces</span></code><span class="deltaxml-new" style="background:#90EE90"> option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.11.3"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> attempt to dereference the namespace URI to locate schema documents. If the option is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">”, the processor </span><span class="rfc2119" id="c.validate-with-xml-schema.11.5"><span class="deltaxml-new" style="background:#90EE90">should not</span></span><span class="deltaxml-new" style="background:#90EE90"> dereference namespace URIs.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="opt.inline.mode-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><span class="deltaxml-new" style="background:#90EE90"> option allow the pipeline author to control how schema validation begins. The “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">strict</span></code><span class="deltaxml-new" style="background:#90EE90">” mode means that the document element must be declared and schema-valid, otherwise it will be treated as invalid. The “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">lax</span></code><span class="deltaxml-new" style="background:#90EE90">” mode means that the absence of a declaration for the document element does not itself count as an unsuccessful outcome of validation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the step specifies a </span><a id="opt.inline.version-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90">, then that version of XML Schema </span><span class="rfc2119" id="c.validate-with-xml-schema.13.2"><span class="deltaxml-new" style="background:#90EE90">must</span></span><span class="deltaxml-new" style="background:#90EE90"> be used to process the validation. </span><a id="err.inline.C0011&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0011"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0011</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the specified schema version is not available. If the step does not specify a version, the implementation may use any version it has available and may use any means to determine what version to use, including, but not limited to, examining the version of the schema(s).</span></p><p><a id="err.inline.C0156&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0156"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0156</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a id="opt.inline.assert-valid-8"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the input document is not valid. If the </span><a id="opt.inline.assert-valid-9"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, it is not an error for the document to be invalid. In this case, if the implementation does not support the PSVI, </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-xml-schema</span></code><span class="deltaxml-new" style="background:#90EE90"> is essentially just an “identity” step, but if the implementation </span><em><span class="deltaxml-new" style="background:#90EE90">does</span></em><span class="deltaxml-new" style="background:#90EE90"> support the PSVI, then the resulting document will have additional type information (at least for the subtrees that are valid).</span></p><p><span class="deltaxml-new" style="background:#90EE90">When XML Schema validation assessment is performed, the processor is invoked in the mode specified by the </span><a id="opt.inline.mode-3"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">mode</span></code><span class="deltaxml-new" style="background:#90EE90"> option. </span><a id="err.inline.C0055&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0055"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0055</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the implementation does not support the specified mode. </span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="port.inline.result-5"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> of the assessment is a document with the Post-Schema-Validation-Infoset (PSVI) ([</span><a href="#xmlschema-1"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">W3C XML Schema: Part 1</span></span></a><span class="deltaxml-new" style="background:#90EE90">]) annotations, if the pipeline implementation supports such annotations. If not, the input document is reproduced with any defaulting of attributes and elements performed as specified by the XML Schema recommendation.</span></p><section id="c.validate-with-xml-schema.17" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties on the </span><a id="port.inline.source-9"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port are preserved on the </span><a id="port.inline.result-6"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. No document properties are preserved on the </span><a id="port.inline.report-6"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">report</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p></div></section></div></section><section id="c.validate-with-json-schema" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.5. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with JSON schema</span><a aria-label="§" class="self-link" href="#c.validate-with-json-schema"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-json-schema</span></code><span class="deltaxml-new" style="background:#90EE90"> step applies a JSON schema validation (as defined in [</span><a href="#jsonschema2020-12"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">JSON schema</span></span></a><span class="deltaxml-new" style="background:#90EE90">] and other publications) to the </span><a id="port.inline.source-10"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> input.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-11"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">json </span></td></tr><tr><td><a href="#port.inline.schema-9"><span class="deltaxml-new" style="background:#90EE90">schema</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-7"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">json </span></td></tr><tr><td><a href="#port.inline.report-7"><span class="deltaxml-new" style="background:#90EE90">report</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-10"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr><tr><td><a href="#opt.inline.default-version-1"><span class="deltaxml-new" style="background:#90EE90">default-version</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">parameters</span></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">report-format</span></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0163&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0163</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the selected version is not supported.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0164&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0164</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the document supplied on schema port is not a valid JSON schema document in the selected version.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0165&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0165</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option on p:validate-with-json-schema is true and the input document is not valid.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-9"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">If the schema does not specify a version and option default-version is empty, the version used is implementation-defined.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-json-schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">false</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">default-version</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">            </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">     </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">report-format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">The option </span><a id="opt.inline.default-version-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">default-version</span></code><span class="deltaxml-new" style="background:#90EE90"> can be used to control the schema's version in case it does not specify one itself. </span><span id="impl-9"><span class="deltaxml-new" style="background:#90EE90">If the schema does not specify a version and option </span><a id="opt.inline.default-version-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">default-version</span></code><span class="deltaxml-new" style="background:#90EE90"> is empty, the version used is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90">.</span></span></p><p><a id="err.inline.C0163&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0163"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0163</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the selected version is not supported.</span></p><p><a id="err.inline.C0164&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0164"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0164</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the document supplied on </span><a id="port.inline.schema-9"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">schema</span></code><span class="deltaxml-new" style="background:#90EE90"> port is not a valid JSON schema document in the selected version.</span></p><p><a id="err.inline.C0165&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0165"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0165</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a id="opt.inline.assert-valid-10"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-json-schema</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the input document is not valid.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output from this step is a copy of the input.</span></p><section id="c.validate-with-json-schema.9" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties on the </span><a id="port.inline.source-11"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port are preserved on the </span><a id="port.inline.result-7"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. No document properties are preserved on the </span><a id="port.inline.report-7"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">report</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p></div></section></div></section><section id="c.validate-with-dtd" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">3.6. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Validate with DTD</span><a aria-label="§" class="self-link" href="#c.validate-with-dtd"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-dtd</span></code><span class="deltaxml-new" style="background:#90EE90"> step validates XML with a DTD.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-12"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml html </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-8"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml </span></td></tr><tr><td><a href="#port.inline.report-8"><span class="deltaxml-new" style="background:#90EE90">report</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">xml json </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.assert-valid-11"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></td><td><span class="deltaxml-new" style="background:#90EE90">true()</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">report-format</span></td><td><span class="deltaxml-new" style="background:#90EE90">xs:string</span></td><td><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">serialization</span></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0210&#34;"><span class="deltaxml-new" style="background:#90EE90">err:C0210</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option on p:validate-with-dtd is true and the input document is not valid.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-dtd</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml html</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr primary-attr"><span class="deltaxml-new" style="background:#90EE90">primary</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value primary-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">report</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">xml json</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">report-format</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">'xvrl'</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr select-attr"><span class="deltaxml-new" style="background:#90EE90">select</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value select-value"><span class="deltaxml-new" style="background:#90EE90">true()</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">DTD validation differs from the other XML validation technologies in that it is applied during parsing. It isn’t possible to validate an XML data model with a DTD. This step necessarily serializes and reparses.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-dtd</span></code><span class="deltaxml-new" style="background:#90EE90"> step serializes the document on the </span><a id="port.inline.source-12"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port and parses the serialization with a validating XML parser. Any warning or error messages produced by the parser will appear on the </span><a id="port.inline.report-8"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">report</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p><div class="note admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-new" style="background:#90EE90">The serialization options must include at least the </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> property (without a system identifier, the document cannot be successfully parsed with a validating parser).</span></p></div></div><p><a id="err.inline.C0210&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0210"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0210</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the </span><a id="opt.inline.assert-valid-11"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">assert-valid</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-dtd</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> and the input document is not valid.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The output from this step is a copy of the input. If validation was successful, the output may have been augmented by the DTD. (For example, default attributes may have been added.)</span></p><section id="c.validate-with-dtd.9" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Using an internal subset</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">To validate a document with an internal subset, construct a text document that is a syntactically valid XML document with the internal subset, use </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:cast-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> to create an XML document, and then validate the resulting document with this step.</span></p></div></section><section id="c.validate-with-dtd.10" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">All document properties on the </span><a id="port.inline.source-13"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port are preserved on the </span><a id="port.inline.result-8"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. No document properties are preserved on the </span><a id="port.inline.report-9"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">report</span></code><span class="deltaxml-new" style="background:#90EE90"> port.</span></p></div></section></div></section></div></section><section class="section" id="errors"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">9</span><span class="deltaxml-new" style="background:#90EE90">4</span>. </bdi>Step Errors<a aria-label="§" class="self-link" href="#errors"></a></h2></div><div class="content"><p><span style="display: none;" class="delete_version">This step can raise <em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>. </span><span style="display: none;" class="add_version">These steps can raise <em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>. </span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">This step</span><span class="deltaxml-new" style="background:#90EE90">These steps</span> can raise <em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>. </span></p><p><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.]</span> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space). For a more complete discussion of dynamic errors, see <cite><a href="../xproc/#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>. </p><p>If a step fails due to a dynamic error, failure propagates upwards until either a <code class="tag-element">p:try</code> is encountered or the entire pipeline fails. In other words, outside of a <code class="tag-element">p:try</code>, step failure causes the entire pipeline to fail.</p><p>The following errors can be raised by this step:</p><div id="step-error-summary"><dl class="errs"><dt id="err.C0011"><code class="errqname">err:XC0011</code></dt><dd><p>It is a dynamic error if the specified schema version is not available.</p><p>See: <a href="#err.inline.C0011">Validate with XML Schema</a></p></dd><dt id="err.C0053"><code class="errqname">err:XC0053</code></dt><dd><p>It is a dynamic error if the assert-valid option on p:validate-with-nvdl is true and the input document is not valid.</p><p>See: <a href="#err.inline.C0053">Validate with NVDL</a></p></dd><dt id="err.C0054"><code class="errqname">err:XC0054</code></dt><dd><p>It is a dynamic error if the assert-valid option is true and any Schematron assertions fail.</p><p>See: <a href="#err.inline.C0054">Validate with Schematron</a></p></dd><dt id="err.C0055"><code class="errqname">err:XC0055</code></dt><dd><p>It is a dynamic error if the implementation does not support the specified mode.</p><p>See: <a href="#err.inline.C0055">Validate with XML Schema</a></p></dd><dt id="err.C0117"><code class="errqname">err:XC0117</code></dt><dd><p>It is a dynamic error if a report-format option was specified that the processor does not support.</p><p>See: <a href="#err.inline.C0117">Common Options and Outputs</a></p></dd><dt id="err.C0151"><code class="errqname">err:XC0151</code></dt><dd><p>It is a dynamic error if the document supplied on schema port is not a valid Schematron document.</p><p>See: <a href="#err.inline.C0151">Validate with Schematron</a></p></dd><dt id="err.C0152"><code class="errqname">err:XC0152</code></dt><dd><p>It is a dynamic error if the document supplied on schema port is not a valid XML schema document.</p><p>See: <a href="#err.inline.C0152">Validate with XML Schema</a></p></dd><dt id="err.C0153"><code class="errqname">err:XC0153</code></dt><dd><p>It is a dynamic error if the document supplied on schema port cannot be interpreted as an RELAX NG Grammar. </p><p>See: <a href="#err.inline.C0153">Validate with RELAX NG</a></p></dd><dt id="err.C0154"><code class="errqname">err:XC0154</code></dt><dd><p>It is a dynamic error if the document supplied on nvdl port is not a valid NVDL document.</p><p>See: <a href="#err.inline.C0154">Validate with NVDL</a></p></dd><dt id="err.C0155"><code class="errqname">err:XC0155</code></dt><dd><p>It is a dynamic error if the assert-valid option on p:validate-with-relax-ng is true and the input document is not valid.</p><p>See: <a href="#err.inline.C0155">Validate with RELAX NG</a></p></dd><dt id="err.C0156"><code class="errqname">err:XC0156</code></dt><dd><p>It is a dynamic error if the assert-valid option on p:validate-with-xml-schema is true and the input document is not valid.</p><p>See: <a href="#err.inline.C0156">Validate with XML Schema</a></p></dd><dt id="err.C0163"><code class="errqname">err:XC0163</code></dt><dd><p>It is a dynamic error if the selected version is not supported.</p><p>See: <a href="#err.inline.C0163">Validate with JSON schema</a></p></dd><dt id="err.C0164"><code class="errqname">err:XC0164</code></dt><dd><p>It is a dynamic error if the document supplied on schema port is not a valid JSON schema document in the selected version.</p><p>See: <a href="#err.inline.C0164">Validate with JSON schema</a></p></dd><dt id="err.C0165"><code class="errqname">err:XC0165</code></dt><dd><p>It is a dynamic error if the assert-valid option on p:validate-with-json-schema is true and the input document is not valid.</p><p>See: <a href="#err.inline.C0165">Validate with JSON schema</a></p></dd><dt id="err.C0210"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0210</span></code></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the assert-valid option on p:validate-with-dtd is true and the input document is not valid.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See: </span><a href="#err.inline.C0210"><span class="deltaxml-new" style="background:#90EE90">Validate with DTD</span></a></p></dd></dl></div></div></section><article class="appendix" id="conformance"><header class="appendix-titlepage"><h2><bdi class="secno">A. </bdi>Conformance<a aria-label="§" class="self-link" href="#conformance"></a></h2></header><div class="content"><p>Conformant processors <span class="rfc2119" id="conformance.2.1">must</span> implement all of the features described in this specification except those that are explicitly identified as optional.</p><p>Some aspects of processor behavior are not completely specified; those features are either <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> or <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</p><p><span id="dt-implementation-dependent" class="termdef">[Definition: An <em class="glossterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.]</span></p><p><span id="dt-implementation-defined" class="termdef">[Definition: An <em class="glossterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="dt-implementation-defined.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.]</span></p><section class="section" id="implementation-defined"><div class="section-titlepage"><h2><bdi class="secno">A.1. </bdi>Implementation-defined features<a aria-label="§" class="self-link" href="#implementation-defined"></a></h2></div><div class="content"><p>The following features are implementation-defined:</p><ol class="features"><li>The supported values for the report-format option are implementation-defined. A processor should at least support the value “xvrl” for the XML validation steps and “svrl” for p:validate-with-schematron. See <a href="#validation-common" title="Common Options and Outputs">Section 2, “Common Options and Outputs”</a>.</li><li>The parameters supported by the validation steps and their semantics are implementation-defined, and they can be different for each validation step. See <a href="#validation-common" title="Common Options and Outputs">Section 2, “Common Options and Outputs”</a>.</li><li>Support for is implementation-defined. See <a href="#c.validate-with-relax-ng" title="Validate with RELAX NG">Section <span class="deltaxml-old" style="background:#FF5555">4</span><span class="deltaxml-new" style="background:#90EE90">3.2</span>, “Validate with RELAX NG”</a>.</li><li>How the Schematron implementation is selected is implementation-defined. See <a href="#c.validate-with-schematron" title="Validate with Schematron">Section <span class="deltaxml-old" style="background:#FF5555">5</span><span class="deltaxml-new" style="background:#90EE90">3.3</span>, “Validate with Schematron”</a>.</li><li>The list of supported Schematron implementations and their associated values is implementation-defined. See <a href="#c.validate-with-schematron" title="Validate with Schematron">Section <span class="deltaxml-old" style="background:#FF5555">5</span><span class="deltaxml-new" style="background:#90EE90">3.3</span>, “Validate with Schematron”</a>.</li><li>Which parameters the c:compile map supports for a given Schematron implementation is implementation-defined. See <a href="#c.validate-with-schematron" title="Validate with Schematron">Section <span class="deltaxml-old" style="background:#FF5555">5</span><span class="deltaxml-new" style="background:#90EE90">3.3</span>, “Validate with Schematron”</a>.</li><li>Which parameters this conversion from native reporting format to XVRL supports is implementation-defined. See <a href="#c.validate-with-schematron" title="Validate with Schematron">Section <span class="deltaxml-old" style="background:#FF5555">5</span><span class="deltaxml-new" style="background:#90EE90">3.3</span>, “Validate with Schematron”</a>.</li><li>It is implementation-defined if the documents supplied on the schemas port are considered when resolving xs:include elements in the schema documents provided. See <a href="#c.validate-with-xml-schema" title="Validate with XML Schema">Section <span class="deltaxml-old" style="background:#FF5555">6</span><span class="deltaxml-new" style="background:#90EE90">3.4</span>, “Validate with XML Schema”</a>.</li><li>If the schema does not specify a version and option default-version is empty, the version used is implementation-defined. See <a href="#c.validate-with-json-schema" title="Validate with JSON schema">Section <span class="deltaxml-old" style="background:#FF5555">7</span><span class="deltaxml-new" style="background:#90EE90">3.5</span>, “Validate with JSON schema”</a>.</li></ol></div></section><section id="implementation-dependent" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">A.2. </span></bdi><span class="deltaxml-old" style="background:#FF5555">Implementation-dependent features</span><a aria-label="§" class="self-link" href="#implementation-dependent"></a></h2></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The following features are implementation-dependent:</span></p><ol class="features"></ol></div></section></div></article><article id="references" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">B. </bdi>References<a aria-label="§" class="self-link" href="#references"></a></h2></header><div class="content"><div id="references.2" class="bibliolist"><div id="xproc30" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0</span>] <a href="https://spec.xproc.org/3.0/xproc/"><span class="citetitle"><cite>XProc 3.0: An XML Pipeline Language</cite></span></a>. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </p></div><div id="xproc30-steps" class="bibliomixed"><p>[<span class="abbrev">XProc 3.0 Steps</span>] <a href="https://spec.xproc.org/"><span class="citetitle"><cite>XProc 3.0 Steps: An Introduction</cite></span></a>. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </p></div><div id="xvrl" class="bibliomixed"><p>[<span class="abbrev">XVRL</span>] <a href="https://spec.xproc.org/master/head/xvrl/"><span class="citetitle"><cite>Extensible Validation Reporting Language</cite></span></a> 2019. </p></div><div id="iso19757-2" class="bibliomixed"><p>[<span class="abbrev">RELAX NG</span>] ISO/IEC JTC 1/SC 34. <a href="https://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=52348"><span class="citetitle"><cite>ISO/IEC 19757-2:2008(E) Document Schema Definition Language (DSDL) -- Part 2: Regular-grammar-based validation -- RELAX NG</cite></span></a> 2008. </p></div><div id="iso19757-3" class="bibliomixed"><p>[<span class="abbrev">Schematron</span>] ISO/IEC JTC 1/SC 34. <span class="citetitle"><cite>ISO/IEC 19757-3:2016(E) Document Schema Definition Languages (DSDL) — Part 3: Rule-based validation — Schematron</cite></span> 2016. </p></div><div id="iso19757-4" class="bibliomixed"><p>[<span class="abbrev">NVDL</span>] ISO/IEC JTC 1/SC 34. <span class="citetitle"><cite>ISO/IEC 19757-4:2006(E) Document Schema Definition Languages (DSDL) — Part 4: Namespace-based Validation Dispatching Language (NVDL)</cite></span> 2006. </p></div><div id="schematron-skeleton" class="bibliomixed"><p>[<span class="abbrev">Schematron Skeleton</span>] <a href="https://schematron.com/front-page/the-schematron-skeleton-implementation/"><span class="citetitle"><cite>Schematron “Skeleton” Implementation</cite></span></a> 2017. </p></div><div id="relaxng-compact-syntax" class="bibliomixed"><p>[<span class="abbrev">RELAX NG Compact Syntax</span>] ISO/IEC JTC 1/SC 34. <span class="citetitle"><cite>ISO/IEC 19757-2:2003/Amd 1:2006 Document Schema Definition Languages (DSDL) — Part 2: Grammar-based validation — RELAX NG AMENDMENT 1 Compact Syntax</cite></span> 2006. </p></div><div id="relaxng-dtd-compat" class="bibliomixed"><p>[<span class="abbrev">RELAX NG DTD Compatibility</span>] <span class="citetitle"><cite>RELAX NG DTD Compatibility</cite></span>. OASIS Committee Specification. 3 December 2001. </p></div><div id="xmlschema-1" class="bibliomixed"><p>[<span class="abbrev">W3C XML Schema: Part 1</span>] <a href="https://www.w3.org/TR/xmlschema-1/"><span class="citetitle"><cite>XML Schema Part 1: Structures Second Edition</cite></span></a>. Henry S. Thompson, David Beech, Murray Maloney, et. al., editors. World Wide Web Consortium, 28 October 2004. </p></div><div id="jsonschema2020-12" class="bibliomixed"><p>[<span class="abbrev">JSON schema</span>] <a href="https://json-schema.org/draft/2020-12/json-schema-validation.html"><span class="citetitle"><cite>JSON Schema Validation: A Vocabulary for Structural Validation of JSON</cite></span></a>. A.Wright, H. Andrews and B. Hutton, editors. Internet Engineering Task Force. June, 2022.</p></div></div></div></article><article id="glossary" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">C. </bdi>Glossary<a aria-label="§" class="self-link" href="#glossary"></a></h2></header><div class="content"><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em></dt><dd class="glossdef"><p>A <em class="firstterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.</p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="glossary.2.2.2.1.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.</p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.</p></dd></dl></div></div></article><article id="changelog" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">D. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Change log</span><a aria-label="§" class="self-link" href="#changelog"></a></h2></header><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">This appendix catalogs recent non-editorial changes.</span></p><div class="orderedlist"><ol style="list-style: decimal;"><li><p><span class="deltaxml-new" style="background:#90EE90">Corrected an error in the sequence type for the </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">default-version</span></code><span class="deltaxml-new" style="background:#90EE90"> option on </span><a href="#c.validate-with-json-schema"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-json-schema</span></code></a><span class="deltaxml-new" style="background:#90EE90"> to allow it to be optional.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Added the </span><a href="#c.validate-with-dtd"><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">p:validate-with-dtd</span></code></a><span class="deltaxml-new" style="background:#90EE90"> step.</span></p></li></ol></div></div></article><article class="appendix" id="ancillary-files"><header class="appendix-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">D</span><span class="deltaxml-new" style="background:#90EE90">E</span>. </bdi>Ancillary files<a aria-label="§" class="self-link" href="#ancillary-files"></a></h2></header><div class="content"><p>This specification includes by reference a number of ancillary files.</p><div class="variablelist"><dl><dt><span class="term"><a href="steps.xpl">steps.xpl</a></span></dt><dd><p>An XProc step library for the declared steps. </p></dd></dl></div></div></article></article><script src="js/prism.js"></script><script src="js/fixup.js"></script><script src="/js/scroll.js"></script></body></html>