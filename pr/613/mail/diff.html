<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: Saxonica--><title>XProc -[[3.0]]- +[[3.1]]+: mail steps</title><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport" /><link class="removeOnSave" crossorigin="anonymous" href="https://www.w3.org" rel="preconnect" /><link as="script" class="removeOnSave" href="js/fixup.js" rel="preload" /><link as="style" class="removeOnSave" href="css/base.css" rel="preload" /><link as="image" class="removeOnSave" href="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" rel="preload" /><link rel="stylesheet" href="css/cg-draft.css" /><link rel="stylesheet" href="css/respec.css" /><link rel="alternate" title="XML" href="specification.xml" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.5.0" /><meta name="description" content="Abstract This specification describes optional mail related steps for&#xA;XProc 3.1: An XML Pipeline Language." /><link href="css/default.css" rel="stylesheet" type="text/css" /><link href="css/db-prism.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="css/base.css" /><link rel="stylesheet" type="text/css" href="css/xproc.css" /><link rel="stylesheet" type="text/css" href="css/print.css" media="print" /><script type="text/javascript" src="js/dbmodnizr.js"></script><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css" /></head><body class="h-entry informative toc-sidebar"><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p></div><div class="head" id="spec.head"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" /></a><h1 class="title p-name" id="title">XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span>: mail steps</h1><h2>Draft Community Group Report <time class="dt-published" datetime="2024-08-20">20 August 2024</time></h2><div class="editors-draft">Editor's Draft at <time class="dt-timestamp" datetime="20240820T15:59:41Z">15:<span class="deltaxml-old" style="background:#FF5555">10</span><span class="deltaxml-new" style="background:#90EE90">59</span> UTC</time> (<a href="https://github.com/xproc//commit/03f5b883b8f61ca0c03c2d6be6b182c72fbdcf4e">build <span class="deltaxml-old" style="background:#FF5555">49</span><span class="deltaxml-new" style="background:#90EE90">79</span></a>)</div><dl><dt>Latest editor’s draft:</dt><dd><a href="https://spec.xproc.org/master/head/mail/">https://spec.xproc.org/master/head/mail/</a></dd><dt>Editors:</dt><dd><span class="personname">Norman Walsh</span></dd><dd><span class="personname">Achim Berndzen</span></dd><dd><span class="personname">Gerrit Imsieke</span></dd><dd><span class="personname">Erik Siegel</span></dd><dt>Participate:</dt><dd><a href="http://github.com/xproc/3.0-steps">GitHub xproc/3.0-steps</a></dd><dd><a href="http://github.com/xproc/3.0-steps/issues">Report an issue</a></dd><dt>Changes:</dt><dd><a href="diff.html">Diff against current “status quo” draft</a></dd><dd><a href="http://github.com/xproc//commits/">Commits for this specification</a></dd></dl><p>This document is also available in these non-normative formats: <a href="specification.xml">XML</a> and HTML with automatic change markup courtesy of <a href="http://www.deltaxml.com/">DeltaXML</a>.</p><p class="copyright"><span style="display: none;" class="delete_version"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020</span> the Contributors to the <cite>XProc 3.0: mail steps</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</span><span style="display: none;" class="add_version"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020</span> the Contributors to the <cite>XProc 3.1: mail steps</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</span><span class="modify_version"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © <span class="years">2018, 2019, 2020</span> the Contributors to the <cite>XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span>: mail steps</cite> specification, published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.</span></p><hr title="Separator for header" /><section class="introductory" id="abstract"><h2>Abstract</h2><p><span style="display: none;" class="delete_version">This specification describes optional mail related steps for <em class="citetitle">XProc 3.0: An XML Pipeline Language</em>.</span><span style="display: none;" class="add_version">This specification describes optional mail related steps for <em class="citetitle">XProc 3.1: An XML Pipeline Language</em>.</span><span class="modify_version">This specification describes optional mail related steps for <em class="citetitle">XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span>: An XML Pipeline Language</em>.</span></p></section><section class="introductory" id="sotd"><h2>Status of this Document</h2><p><strong>This document is an editor's draft that has no official standing.</strong></p><p>This specification was published by the <a href="https://www.w3.org/community/xproc-next/">XProc Next Community Group</a>. It is not a W3C Standard nor is it on the W3C Standards Track. Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply. Learn more about <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>. </p><p>If you wish to make comments regarding this document, please send them to <a href="mailto:xproc-dev@w3.org">xproc-dev@w3.org</a>. (<a href="mailto:xproc-dev-request@w3.org?subject=subscribe">subscribe</a>, <a href="https://lists.w3.org/Archives/Public/xproc-dev/">archives</a>). </p><div class="note editorial admonition"><h3><span class="deltaxml-new" style="background:#90EE90">Note</span></h3><div class="admonition-body"><p><span class="deltaxml-new" style="background:#90EE90">This draft is the “editor’s working draft” and may continue to evolve. </span></p></div></div></section></div><div class="lists-of-titles"><nav id="toc"><h2 id="TableOfContents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li><li class="tocline"><a class="tocxref" href="#c.send-mail"><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2. </span></bdi><span class="deltaxml-old" style="background:#FF5555">p:send-mail</span></a><a class="tocxref" href="#library"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Step library</span></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#c.send-mail"><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:send-mail</span></a></li></ul></li><li class="tocline"><a class="tocxref" href="#errors"><bdi class="secno">3. </bdi>Step Errors</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">A. </bdi>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#implementation-defined"><bdi class="secno">A.1. </bdi>Implementation-defined features</a></li></ul></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a></li><li class="tocline"><a class="tocxref" href="#glossary"><bdi class="secno">C. </bdi>Glossary</a></li><li class="tocline"><a class="tocxref" href="#ancillary-files"><bdi class="secno">D. </bdi>Ancillary files</a></li></ol></nav></div><article class="specification"><section class="section" id="introduction"><div class="section-titlepage"><h2><bdi class="secno">1. </bdi>Introduction<a aria-label="§" class="self-link" href="#introduction"></a></h2></div><div class="content"><p>This specification describes optional mail related XProc steps. A machine-readable description of these steps may be found in <a href="steps.xpl">steps.xpl</a>. </p><p>Familarity with the general nature of [<a><span style="display: none;" class="delete_version" href="#xproc30"><span class="abbrev">XProc 3.0</span></span><span style="display: none;" class="add_version" href="#xproc31"><span class="abbrev">XProc 3.1</span></span><span class="modify_version" href="#xproc31"><span class="abbrev">XProc <span class="deltaxml-old" style="background:#FF5555">3.0</span><span class="deltaxml-new" style="background:#90EE90">3.1</span></span></span></a>] steps is assumed<span class="deltaxml-old" style="background:#FF5555">; for background details, see [</span><a href="#xproc30-steps"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XProc 3.0 Steps</span></span></a><span class="deltaxml-old" style="background:#FF5555">]</span>.</p></div></section><section id="c.send-mail" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-old" style="background:#FF5555">2. </span></bdi><span class="deltaxml-old" style="background:#FF5555">p:send-mail</span><a aria-label="§" class="self-link" href="#c.send-mail"></a></h2></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">p:send-mail</span></code><span class="deltaxml-old" style="background:#FF5555"> step sends an email message.</span></p><div class="declare-step"><p><span class="deltaxml-old" style="background:#FF5555">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Input port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-1"><span class="deltaxml-old" style="background:#FF5555">source</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td><span class="deltaxml-old" style="background:#FF5555">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-old" style="background:#FF5555">Output port</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Primary</span></th><th class="check"><span class="deltaxml-old" style="background:#FF5555">Sequence</span></th><th><span class="deltaxml-old" style="background:#FF5555">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-1"><span class="deltaxml-old" style="background:#FF5555">result</span></a></td><td class="check"><span class="deltaxml-old" style="background:#FF5555">✔ </span></td><td class="check"><span class="deltaxml-old" style="background:#FF5555"> </span></td><td><span class="deltaxml-old" style="background:#FF5555">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Option name</span></th><th><span class="deltaxml-old" style="background:#FF5555">Type</span></th><th><span class="deltaxml-old" style="background:#FF5555">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.auth-1"><span class="deltaxml-old" style="background:#FF5555">auth</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:string, item()+)?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr><tr><td><a href="#opt.inline.parameters-1"><span class="deltaxml-old" style="background:#FF5555">parameters</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr><tr><td><a href="#c.send-mail-def-serialization"><span class="deltaxml-old" style="background:#FF5555">serialization</span></a></td><td><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-old" style="background:#FF5555">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-old" style="background:#FF5555">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Error code</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0159&#34;"><span class="deltaxml-old" style="background:#FF5555">err:XC0159</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if any key in the “auth” map is associated with a value that is not an instance of the required type.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0160&#34;"><span class="deltaxml-old" style="background:#FF5555">err:XC0160</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if any key in the “parameters” map is associated with a value that is not an instance of the required type.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0161&#34;"><span class="deltaxml-old" style="background:#FF5555">err:XC0161</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the first document on the source port does not conform to the required format.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0162&#34;"><span class="deltaxml-old" style="background:#FF5555">err:XC0162</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is a dynamic error if the email cannot be send.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Implementation</span></th><th><span class="deltaxml-old" style="background:#FF5555">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-1"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">Other key value pairs in “auth” are implementation-defined</span></td></tr><tr><td><a href="#impl-2"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">It is implementation-defined which other key/value pairs in the parameters option are supported.</span></td></tr><tr><td><a href="#impl-3"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">Other key value pairs in “auth” are implementation-defined</span></td></tr><tr><td><a href="#impl-4"><span class="deltaxml-old" style="background:#FF5555">Defined</span></a></td><td class="description"><span class="deltaxml-old" style="background:#FF5555">If no values for “host” or “port” is specified, it it implementation-defined which server and port is used.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-old" style="background:#FF5555">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-old" style="background:#FF5555">type</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value type-value"><span class="deltaxml-old" style="background:#FF5555">p:send-mail</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">source</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr sequence-attr"><span class="deltaxml-old" style="background:#FF5555">sequence</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value sequence-value"><span class="deltaxml-old" style="background:#FF5555">true</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">any</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="input"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-old" style="background:#FF5555">port</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value port-value"><span class="deltaxml-old" style="background:#FF5555">result</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr content-types-attr"><span class="deltaxml-old" style="background:#FF5555">content-types</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value content-types-value"><span class="deltaxml-old" style="background:#FF5555">application/xml</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">  </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">auth</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:string, item()+)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">         </span></code></span><span class="deltaxml-old" style="background:#FF5555">     </span><span class="opt-opt"><code><span class="deltaxml-old" style="background:#FF5555">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-old" style="background:#FF5555">name</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value name-value"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code class="attr as-attr"><span class="deltaxml-old" style="background:#FF5555">as</span></code><code><span class="deltaxml-old" style="background:#FF5555">="</span></code><code class="value as-value"><span class="deltaxml-old" style="background:#FF5555">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-old" style="background:#FF5555">"</span></code><code><span class="deltaxml-old" style="background:#FF5555">/&gt;</span></code><code><span class="deltaxml-old" style="background:#FF5555">    </span></code></span><code><span class="deltaxml-old" style="background:#FF5555">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-old" style="background:#FF5555">The first document on the </span><a id="port.inline.source-1"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port is expected to conform to [</span><a href="#id-draft-klyne"><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XML format for mail</span></span></a><span class="deltaxml-old" style="background:#FF5555">]. </span><a id="err.inline.C0161&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0161"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0161</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the first document on the </span><a id="port.inline.source-2"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">source</span></code><span class="deltaxml-old" style="background:#FF5555"> port does not conform to the required format. Any additional documents are treated as attachments.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the mail was send successfully a single </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">c:result</span></code><span class="deltaxml-old" style="background:#FF5555"> document whose content is “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555">” appears on the </span><a id="port.inline.result-1"></a><code class="port"><span class="deltaxml-old" style="background:#FF5555">result</span></code><span class="deltaxml-old" style="background:#FF5555"> port. </span><a id="err.inline.C0162&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0162"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0162</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if the email cannot be send.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">em:content</span></code><span class="deltaxml-old" style="background:#FF5555"> may contain either text or HTML. To send some other type as the first message body, you must leave the </span><code class="tag-element"><span class="deltaxml-old" style="background:#FF5555">em:content</span></code><span class="deltaxml-old" style="background:#FF5555"> element out of the first document and supply the body as a second document.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The </span><code class="code"><span class="deltaxml-old" style="background:#FF5555">p:send-mail</span></code><span class="deltaxml-old" style="background:#FF5555"> step has the following options:</span></p><div class="variablelist"><dl><dt><span class="term"><a id="c.send-mail-def-serialization"></a><a id="opt.inline.serialization-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code></span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="opt.inline.serialization-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code><span class="deltaxml-old" style="background:#FF5555"> option is used to control the serialization of documents for constructing the mail. If a document has a “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code><span class="deltaxml-old" style="background:#FF5555">” document property, the effective value of the serialization options is the union of the two maps, where the entries in the “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">serialization</span></code><span class="deltaxml-old" style="background:#FF5555">” document property take precedence.</span></p></dd><dt><span class="term"><span class="deltaxml-old" style="background:#FF5555">auth</span></span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If the mail service requires an authentication to send mails, these can be supplied using the </span><a id="opt.inline.auth-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">auth</span></code><span class="deltaxml-old" style="background:#FF5555"> option.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The following standard keys are defined:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-old" style="background:#FF5555">username (xs:string)</span></span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The username.</span></p></dd><dt><span class="term"><span class="deltaxml-old" style="background:#FF5555">password (xs:string)</span></span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The password.</span></p></dd></dl></div><p><span id="impl-1"><span class="deltaxml-old" style="background:#FF5555">Other key value pairs in “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">auth</span></code><span class="deltaxml-old" style="background:#FF5555">” are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em></span><span class="deltaxml-old" style="background:#FF5555">.</span><a id="err.inline.C0159&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0159"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0159</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any key in the “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">auth</span></code><span class="deltaxml-old" style="background:#FF5555">” map is associated with a value that is not an instance of the required type.</span></p></dd><dt><span class="term"><span class="deltaxml-old" style="background:#FF5555">parameters</span></span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The </span><a id="opt.inline.parameters-1"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><span class="deltaxml-old" style="background:#FF5555"> option can be used to supply additional information for constructing and sending mails. A number of parameters are defined in this specification. </span><span id="impl-2"><span class="deltaxml-old" style="background:#FF5555">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> which other key/value pairs in the </span><a id="opt.inline.parameters-2"></a><code class="option"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><span class="deltaxml-old" style="background:#FF5555"> option are supported.</span></span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-old" style="background:#FF5555">send-authorization (xs:boolean)</span></span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">If the key is associated with </span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">false</span></code><span class="deltaxml-old" style="background:#FF5555"> no authentication will be used when sending a mail.</span></p></dd><dt><span class="term"><span class="deltaxml-old" style="background:#FF5555">host (xs:string)</span></span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The SMTP server.</span></p></dd><dt><span class="term"><span class="deltaxml-old" style="background:#FF5555">port (xs:unsignedShort)</span></span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">The port.</span></p></dd></dl></div><p><span id="impl-3"><span class="deltaxml-old" style="background:#FF5555">Other key value pairs in “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">auth</span></code><span class="deltaxml-old" style="background:#FF5555">” are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em></span><span class="deltaxml-old" style="background:#FF5555">.</span><a id="err.inline.C0160&#34;"></a><span class="deltaxml-old" style="background:#FF5555">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-old" style="background:#FF5555">dynamic error</span></a></em><span class="deltaxml-old" style="background:#FF5555"> (</span><a href="#err.C0160"><code class="errqname"><span class="deltaxml-old" style="background:#FF5555">err:XC0160</span></code></a><span class="deltaxml-old" style="background:#FF5555">) if any key in the “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">parameters</span></code><span class="deltaxml-old" style="background:#FF5555">” map is associated with a value that is not an instance of the required type.</span></p><p><span id="impl-4"><span class="deltaxml-old" style="background:#FF5555">If no values for “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">host</span></code><span class="deltaxml-old" style="background:#FF5555">” or “</span><code class="literal"><span class="deltaxml-old" style="background:#FF5555">port</span></code><span class="deltaxml-old" style="background:#FF5555">” is specified, it it </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-old" style="background:#FF5555">implementation-defined</span></a></em><span class="deltaxml-old" style="background:#FF5555"> which server and port is used.</span></span></p></dd></dl></div><section id="c.send-mail.9" class="simplesect"><div class="section-titlepage"><h3><span class="deltaxml-old" style="background:#FF5555">Document properties</span></h3></div><div class="content"><p><span class="deltaxml-old" style="background:#FF5555">No document properties are preserved.</span></p></div></section></div></section><section id="library" class="section"><div class="section-titlepage"><h2><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2. </span></bdi><span class="deltaxml-new" style="background:#90EE90">Step library</span><a aria-label="§" class="self-link" href="#library"></a></h2></div><div class="content"><section id="c.send-mail" class="section"><div class="section-titlepage"><h3><bdi class="secno"><span class="deltaxml-new" style="background:#90EE90">2.1. </span></bdi><span class="deltaxml-new" style="background:#90EE90">p:send-mail</span><a aria-label="§" class="self-link" href="#c.send-mail"></a></h3></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:send-mail</span></code><span class="deltaxml-new" style="background:#90EE90"> step sends an email message.</span></p><div class="declare-step"><p><span class="deltaxml-new" style="background:#90EE90">Summary</span></p><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Input port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.source-1"><span class="deltaxml-new" style="background:#90EE90">source</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td><span class="deltaxml-new" style="background:#90EE90">any </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port"><span class="deltaxml-new" style="background:#90EE90">Output port</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Primary</span></th><th class="check"><span class="deltaxml-new" style="background:#90EE90">Sequence</span></th><th><span class="deltaxml-new" style="background:#90EE90">Content types</span></th></tr></thead><tbody><tr><td class="primary"><a href="#port.inline.result-1"><span class="deltaxml-new" style="background:#90EE90">result</span></a></td><td class="check"><span class="deltaxml-new" style="background:#90EE90">✔ </span></td><td class="check"><span class="deltaxml-new" style="background:#90EE90"> </span></td><td><span class="deltaxml-new" style="background:#90EE90">application/xml </span></td></tr></tbody></table><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Option name</span></th><th><span class="deltaxml-new" style="background:#90EE90">Type</span></th><th><span class="deltaxml-new" style="background:#90EE90">Default value</span></th></tr></thead><tbody><tr><td><a href="#opt.inline.auth-1"><span class="deltaxml-new" style="background:#90EE90">auth</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:string, item()+)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#opt.inline.parameters-1"><span class="deltaxml-new" style="background:#90EE90">parameters</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr><tr><td><a href="#c.send-mail-def-serialization"><span class="deltaxml-new" style="background:#90EE90">serialization</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></td><td><span class="deltaxml-new" style="background:#90EE90">()</span></td></tr></tbody></table><details><summary><span class="deltaxml-new" style="background:#90EE90">Errors</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Error code</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td class="errcode"><a href="#err.inline.C0159&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0159</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any key in the “auth” map is associated with a value that is not an instance of the required type.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0160&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0160</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if any key in the “parameters” map is associated with a value that is not an instance of the required type.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0161&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0161</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the first document on the source port does not conform to the required format.</span></td></tr><tr><td class="errcode"><a href="#err.inline.C0162&#34;"><span class="deltaxml-new" style="background:#90EE90">err:XC0162</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is a dynamic error if the email cannot be send.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Implementation details</span></summary><table class="tableaux"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Implementation</span></th><th><span class="deltaxml-new" style="background:#90EE90">Description</span></th></tr></thead><tbody><tr><td><a href="#impl-1"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Other key value pairs in “auth” are implementation-defined</span></td></tr><tr><td><a href="#impl-2"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">It is implementation-defined which other key/value pairs in the parameters option are supported.</span></td></tr><tr><td><a href="#impl-3"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">Other key value pairs in “auth” are implementation-defined</span></td></tr><tr><td><a href="#impl-4"><span class="deltaxml-new" style="background:#90EE90">Defined</span></a></td><td class="description"><span class="deltaxml-new" style="background:#90EE90">If no values for “host” or “port” is specified, it it implementation-defined which server and port is used.</span></td></tr></tbody></table></details><details><summary><span class="deltaxml-new" style="background:#90EE90">Declaration</span></summary><p class="element-syntax element-syntax-declare-step"><span class="decl"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:declare-step</span></code><code class="attr type-attr"><span class="deltaxml-new" style="background:#90EE90">type</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value type-value"><span class="deltaxml-new" style="background:#90EE90">p:send-mail</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:input</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">source</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr sequence-attr"><span class="deltaxml-new" style="background:#90EE90">sequence</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value sequence-value"><span class="deltaxml-new" style="background:#90EE90">true</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">any</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="input"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:output</span></code><code class="attr port-attr"><span class="deltaxml-new" style="background:#90EE90">port</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value port-value"><span class="deltaxml-new" style="background:#90EE90">result</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr content-types-attr"><span class="deltaxml-new" style="background:#90EE90">content-types</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value content-types-value"><span class="deltaxml-new" style="background:#90EE90">application/xml</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName,item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">  </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">auth</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:string, item()+)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">         </span></code></span><br /><span class="deltaxml-new" style="background:#90EE90">     </span><span class="opt-opt"><code><span class="deltaxml-new" style="background:#90EE90">&lt;p:option</span></code><code class="attr name-attr"><span class="deltaxml-new" style="background:#90EE90">name</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value name-value"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code class="attr as-attr"><span class="deltaxml-new" style="background:#90EE90">as</span></code><code><span class="deltaxml-new" style="background:#90EE90">="</span></code><code class="value as-value"><span class="deltaxml-new" style="background:#90EE90">map(xs:QName, item()*)?</span></code><code><span class="deltaxml-new" style="background:#90EE90">"</span></code><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><code><span class="deltaxml-new" style="background:#90EE90">    </span></code></span><br /><code><span class="deltaxml-new" style="background:#90EE90">&lt;/p:declare-step&gt;</span></code></p></details></div><p><span class="deltaxml-new" style="background:#90EE90">The first document on the </span><a id="port.inline.source-1"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port is expected to conform to [</span><a href="#id-draft-klyne"><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XML format for mail</span></span></a><span class="deltaxml-new" style="background:#90EE90">]. </span><a id="err.inline.C0161&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0161"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0161</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the first document on the </span><a id="port.inline.source-2"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90"> port does not conform to the required format. Any additional documents are treated as attachments.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the mail was send successfully a single </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">c:result</span></code><span class="deltaxml-new" style="background:#90EE90"> document whose content is “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">” appears on the </span><a id="port.inline.result-1"></a><code class="port"><span class="deltaxml-new" style="background:#90EE90">result</span></code><span class="deltaxml-new" style="background:#90EE90"> port. </span><a id="err.inline.C0162&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0162"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0162</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if the email cannot be send.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">em:content</span></code><span class="deltaxml-new" style="background:#90EE90"> may contain either text or HTML. To send some other type as the first message body, you must leave the </span><code class="tag-element"><span class="deltaxml-new" style="background:#90EE90">em:content</span></code><span class="deltaxml-new" style="background:#90EE90"> element out of the first document and supply the body as a second document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code class="code"><span class="deltaxml-new" style="background:#90EE90">p:send-mail</span></code><span class="deltaxml-new" style="background:#90EE90"> step has the following options:</span></p><div class="variablelist"><dl><dt><span class="term"><a id="c.send-mail-def-serialization"></a><a id="opt.inline.serialization-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="opt.inline.serialization-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><span class="deltaxml-new" style="background:#90EE90"> option is used to control the serialization of documents for constructing the mail. If a document has a “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><span class="deltaxml-new" style="background:#90EE90">” document property, the effective value of the serialization options is the union of the two maps, where the entries in the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">serialization</span></code><span class="deltaxml-new" style="background:#90EE90">” document property take precedence.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">auth</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">If the mail service requires an authentication to send mails, these can be supplied using the </span><a id="opt.inline.auth-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">auth</span></code><span class="deltaxml-new" style="background:#90EE90"> option.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The following standard keys are defined:</span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">username (xs:string)</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The username.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">password (xs:string)</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The password.</span></p></dd></dl></div><p><span id="impl-1"><span class="deltaxml-new" style="background:#90EE90">Other key value pairs in “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">auth</span></code><span class="deltaxml-new" style="background:#90EE90">” are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em></span><span class="deltaxml-new" style="background:#90EE90">.</span><a id="err.inline.C0159&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0159"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0159</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any key in the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">auth</span></code><span class="deltaxml-new" style="background:#90EE90">” map is associated with a value that is not an instance of the required type.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">parameters</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The </span><a id="opt.inline.parameters-1"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> option can be used to supply additional information for constructing and sending mails. A number of parameters are defined in this specification. </span><span id="impl-2"><span class="deltaxml-new" style="background:#90EE90">It is </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> which other key/value pairs in the </span><a id="opt.inline.parameters-2"></a><code class="option"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> option are supported.</span></span></p><div class="variablelist"><dl><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">send-authorization (xs:boolean)</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">If the key is associated with </span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> no authentication will be used when sending a mail.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">host (xs:string)</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The SMTP server.</span></p></dd><dt><span class="term"><span class="deltaxml-new" style="background:#90EE90">port (xs:unsignedShort)</span></span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The port.</span></p></dd></dl></div><p><span id="impl-3"><span class="deltaxml-new" style="background:#90EE90">Other key value pairs in “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">auth</span></code><span class="deltaxml-new" style="background:#90EE90">” are </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em></span><span class="deltaxml-new" style="background:#90EE90">.</span><a id="err.inline.C0160&#34;"></a><span class="deltaxml-new" style="background:#90EE90">It is a </span><em class="glossterm"><a href="#dt-dynamic-error"><span class="deltaxml-new" style="background:#90EE90">dynamic error</span></a></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#err.C0160"><code class="errqname"><span class="deltaxml-new" style="background:#90EE90">err:XC0160</span></code></a><span class="deltaxml-new" style="background:#90EE90">) if any key in the “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">parameters</span></code><span class="deltaxml-new" style="background:#90EE90">” map is associated with a value that is not an instance of the required type.</span></p><p><span id="impl-4"><span class="deltaxml-new" style="background:#90EE90">If no values for “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">host</span></code><span class="deltaxml-new" style="background:#90EE90">” or “</span><code class="literal"><span class="deltaxml-new" style="background:#90EE90">port</span></code><span class="deltaxml-new" style="background:#90EE90">” is specified, it it </span><em class="glossterm"><a href="#dt-implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a></em><span class="deltaxml-new" style="background:#90EE90"> which server and port is used.</span></span></p></dd></dl></div><section id="c.send-mail.9" class="simplesect"><div class="section-titlepage"><h4><span class="deltaxml-new" style="background:#90EE90">Document properties</span></h4></div><div class="content"><p><span class="deltaxml-new" style="background:#90EE90">No document properties are preserved.</span></p></div></section></div></section></div></section><section id="errors" class="section"><div class="section-titlepage"><h2><bdi class="secno">3. </bdi>Step Errors<a aria-label="§" class="self-link" href="#errors"></a></h2></div><div class="content"><p>These steps can raise <em class="glossterm"><a href="#dt-dynamic-error">dynamic errors</a></em>. </p><p><span id="dt-dynamic-error" class="termdef">[Definition: A <em class="glossterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.]</span> Examples of dynamic errors include references to URIs that cannot be resolved, steps which fail, and pipelines that exhaust the capacity of an implementation (such as memory or disk space). For a more complete discussion of dynamic errors, see <cite><a href="../xproc/#dynamic-errors">Dynamic Errors</a></cite> in <cite><a href="../xproc/">XProc 3.0: An XML Pipeline Language</a></cite>. </p><p>If a step fails due to a dynamic error, failure propagates upwards until either a <code class="tag-element">p:try</code> is encountered or the entire pipeline fails. In other words, outside of a <code class="tag-element">p:try</code>, step failure causes the entire pipeline to fail.</p><p>The following errors can be raised by this step:</p><div id="step-error-summary"><dl class="errs"><dt id="err.C0159"><code class="errqname">err:XC0159</code></dt><dd><p>It is a dynamic error if any key in the “auth” map is associated with a value that is not an instance of the required type.</p><p>See: <a href="#err.inline.C0159">p:send-mail</a></p></dd><dt id="err.C0160"><code class="errqname">err:XC0160</code></dt><dd><p>It is a dynamic error if any key in the “parameters” map is associated with a value that is not an instance of the required type.</p><p>See: <a href="#err.inline.C0160">p:send-mail</a></p></dd><dt id="err.C0161"><code class="errqname">err:XC0161</code></dt><dd><p>It is a dynamic error if the first document on the source port does not conform to the required format.</p><p>See: <a href="#err.inline.C0161">p:send-mail</a></p></dd><dt id="err.C0162"><code class="errqname">err:XC0162</code></dt><dd><p>It is a dynamic error if the email cannot be send.</p><p>See: <a href="#err.inline.C0162">p:send-mail</a></p></dd></dl></div></div></section><article class="appendix" id="conformance"><header class="appendix-titlepage"><h2><bdi class="secno">A. </bdi>Conformance<a aria-label="§" class="self-link" href="#conformance"></a></h2></header><div class="content"><p>Conformant processors <span class="rfc2119" id="conformance.2.1">must</span> implement all of the features described in this specification except those that are explicitly identified as optional.</p><p>Some aspects of processor behavior are not completely specified; those features are either <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> or <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em>.</p><p><span id="dt-implementation-dependent" class="termdef">[Definition: An <em class="glossterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.]</span></p><p><span id="dt-implementation-defined" class="termdef">[Definition: An <em class="glossterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="dt-implementation-defined.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.]</span></p><section class="section" id="implementation-defined"><div class="section-titlepage"><h2><bdi class="secno">A.1. </bdi>Implementation-defined features<a aria-label="§" class="self-link" href="#implementation-defined"></a></h2></div><div class="content"><p>The following features are implementation-defined:</p><ol class="features"><li>Other key value pairs in “auth” are implementation-defined See <a href="#c.send-mail" title="p:send-mail">Section <span class="deltaxml-old" style="background:#FF5555">2</span><span class="deltaxml-new" style="background:#90EE90">2.1</span>, “p:send-mail”</a>.</li><li>It is implementation-defined which other key/value pairs in the parameters option are supported. See <a href="#c.send-mail" title="p:send-mail">Section <span class="deltaxml-old" style="background:#FF5555">2</span><span class="deltaxml-new" style="background:#90EE90">2.1</span>, “p:send-mail”</a>.</li><li>Other key value pairs in “auth” are implementation-defined See <a href="#c.send-mail" title="p:send-mail">Section <span class="deltaxml-old" style="background:#FF5555">2</span><span class="deltaxml-new" style="background:#90EE90">2.1</span>, “p:send-mail”</a>.</li><li>If no values for “host” or “port” is specified, it it implementation-defined which server and port is used. See <a href="#c.send-mail" title="p:send-mail">Section <span class="deltaxml-old" style="background:#FF5555">2</span><span class="deltaxml-new" style="background:#90EE90">2.1</span>, “p:send-mail”</a>.</li></ol></div></section></div></article><article class="appendix" id="references"><header class="appendix-titlepage"><h2><bdi class="secno">B. </bdi>References<a aria-label="§" class="self-link" href="#references"></a></h2></header><div class="content"><div class="bibliolist" id="references.2"><div id="id-draft-klyne" class="bibliomixed"><p>[<span class="abbrev">XML format for mail</span>] <a href="https://tools.ietf.org/html/draft-klyne-message-rfc822-xml-03"><span class="citetitle"><cite>Internet Draft: An XML Format for mail and other messages</cite></span></a>. G. Klyne. Network Working Group, IETF, April 2002.</p></div><div id="xproc30" class="bibliomixed"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XProc 3.0</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="https://spec.xproc.org/3.0/xproc/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XProc 3.0: An XML Pipeline Language</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </span></p></div><div id="xproc30-steps" class="bibliomixed"><p><span class="deltaxml-old" style="background:#FF5555">[</span><span class="abbrev"><span class="deltaxml-old" style="background:#FF5555">XProc 3.0 Steps</span></span><span class="deltaxml-old" style="background:#FF5555">] </span><a href="https://spec.xproc.org/"><span class="citetitle"><cite><span class="deltaxml-old" style="background:#FF5555">XProc 3.0 Steps: An Introduction</span></cite></span></a><span class="deltaxml-old" style="background:#FF5555">. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </span></p></div><div id="xproc31" class="bibliomixed"><p><span class="deltaxml-new" style="background:#90EE90">[</span><span class="abbrev"><span class="deltaxml-new" style="background:#90EE90">XProc 3.1</span></span><span class="deltaxml-new" style="background:#90EE90">] </span><a href="https://spec.xproc.org/lastcall-2024-08/head/xproc/"><span class="citetitle"><cite><span class="deltaxml-new" style="background:#90EE90">XProc 3.1: An XML Pipeline Language</span></cite></span></a><span class="deltaxml-new" style="background:#90EE90">. Norman Walsh, Achim Berndzen, Gerrit Imsieke and Erik Siegel, editors. </span></p></div></div></div></article><article id="glossary" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">C. </bdi>Glossary<a aria-label="§" class="self-link" href="#glossary"></a></h2></header><div class="content"><div class="glosslist"><dl><dt id="glossary.2.1" class="glossentry"><em class="glossterm"><a href="#dt-dynamic-error">dynamic error</a></em></dt><dd class="glossdef"><p>A <em class="firstterm">dynamic error</em> is one which occurs while a pipeline is being evaluated.</p></dd><dt id="glossary.2.2" class="glossentry"><em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-defined</em> feature is one where the implementation has discretion in how it is performed. Conformant implementations <span class="rfc2119" id="glossary.2.2.2.1.2">must</span> document how <em class="glossterm"><a href="#dt-implementation-defined">implementation-defined</a></em> features are performed.</p></dd><dt id="glossary.2.3" class="glossentry"><em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em></dt><dd class="glossdef"><p>An <em class="firstterm">implementation-dependent</em> feature is one where the implementation has discretion in how it is performed. Implementations are not required to document or explain how <em class="glossterm"><a href="#dt-implementation-dependent">implementation-dependent</a></em> features are performed.</p></dd></dl></div></div></article><article id="ancillary-files" class="appendix"><header class="appendix-titlepage"><h2><bdi class="secno">D. </bdi>Ancillary files<a aria-label="§" class="self-link" href="#ancillary-files"></a></h2></header><div class="content"><p>This specification includes by reference a number of ancillary files.</p><div class="variablelist"><dl><dt><span class="term"><a href="steps.xpl">steps.xpl</a></span></dt><dd><p>An XProc step library for the declared steps. </p></dd></dl></div></div></article></article><script src="js/prism.js"></script><script src="js/fixup.js"></script><script src="/js/scroll.js"></script></body></html>